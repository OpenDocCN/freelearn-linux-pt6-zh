# 序言

*NGINX 宝典*介绍了将 NGINX 配置为 Web 服务器的基础知识，涵盖与常见 Web 框架（如 WordPress 和 Ruby on Rails）一起使用，以及如何作为反向代理使用。作为一本实用的参考指南，本书将为你提供基于真实世界部署的实践答案，帮助你快速启动和运行。

本书还提供了多种 SSL 配置的配方，涵盖不同的日志记录场景、实际重写操作和多种负载均衡场景。高级主题包括带宽管理、Docker 容器使用、性能调优、OpenResty 以及 NGINX Plus 的商业功能。

读完本书后，你将能够适应并使用各种 NGINX 实现来解决你遇到的任何问题。

# 本书内容概览

第一章，*开始使用*，回顾了 NGINX 的一些基础知识。它旨在作为入门章节，以便在我们进入更复杂的结构时不假设读者已有的知识。

第二章，*常见 PHP 场景*，讲解了更常见的 PHP 场景及如何通过 NGINX 实现它们。读者将学习如何配置 NGINX 以及如何部署一个基础站点。

第三章，*常见框架*，讲解了非 PHP 框架。它将帮助读者理解并通过 NGINX 实现所有常见的非 PHP 平台。

第四章，*关于 SSL 的一切*，讲解了如何通过 NGINX 安装各种 SSL 证书，并介绍了为特定场景调整配置所需的内容。

第五章，*日志记录*，解释了错误监控和访问模式分析对于运行服务器的基本重要性。

第六章，*重写规则*，讲解了重写规则的工作原理，并针对许多常见场景给出了具体实现。它将充满基于真实世界场景的具体、实用的示例。

第七章，*反向代理*，讲解了基本的代理概念，并通过缓存和内容过期的具体示例进行说明。本章将解释如何配置 NGINX 作为反向代理，内容缓存，监控缓存状态，微缓存，以及许多其他重要场景。

第八章，*负载均衡*，讲解了 NGINX 的负载均衡组件，以及如何在特定场景中实现它们。在本章中，你将学习到三种重要的负载均衡技术——轮询、最少连接和基于哈希的负载均衡。

第九章，*高级特性*，涵盖了一些不常用的 NGINX 特性，它们为何可用，以及如何实现它们。本章包括认证、WebDAV、带宽管理、连接限制和使用 NGINX 修改标头。

第十章，*Docker 容器*，让你通过使用 NGINX 在容器中的实际场景来了解。它将为常见情景提供基本的 Dockerfile 配置。

第十一章，*性能调优*，旨在基于现有的 NGINX 配置构建，并实现特定的性能增强。

第十二章，*OpenResty*，介绍了 OpenResty 的概念，这是 NGINX、Lua 脚本和几个额外的第三方模块的结合，已经打包好可供使用。

第十三章，*NGINX Plus – 商业版*，展示了 Plus 版本的特性，以及如何实施它们。

# 本书需要什么

以下是你需要浏览本书中的配方所需的软件列表：

+   NGINX

+   PHP 7

+   Ubuntu/CentOS/RHEL

# 本书适合谁

本书面向刚开始使用 NGINX 的初中级开发者。假定他们已经了解 Web 服务器的基础知识和基本网络工作原理。

# 部分

在本书中，你会发现几个经常出现的标题（准备就绪、如何做…、工作原理…、还有更多…和参见）。为了清晰地指导如何完成一个配方，我们使用这些部分如下：

# 准备就绪

此部分告诉你在配方中可以期待什么，并描述了为配方设置所需的任何软件或任何初步设置的方法。

# 如何做…

本节包含了按配方所需的步骤。

# 工作原理…

本节通常包括对前一节中发生的事情的详细解释。

# 还有更多…

本节包含有关配方的附加信息，以使读者对配方有更多了解。

# 参见

此部分提供了有用的链接，指向配方的其他有用信息。

# 约定

在本书中，你会发现多种文本样式，用以区分不同类型的信息。以下是一些示例及其含义的解释。文中的代码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："要安装最新的 NGINX 版本，请通过将以下内容添加到 `/etc/yum.repos.d/nginx.repo` 中来添加 NGINX 主线存储库。"

代码块设置如下：

```
server {
      listen 80;
      server_name server.yourdomain.com; 
      access_log /var/log/nginx/log/host.access.log combined;

      location / {
          root /var/www/html;
          index index.html; 
      }
}
```

任何命令行输入或输出如下所示：

```
mkdir -p /var/www/vhosts 
```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的词汇，例如菜单或对话框中的内容，在文本中会这样显示：“由于我们的配置非常简单，我们可以直接接受默认设置并点击创建。”

警告或重要提示以这种方式出现。

提示和技巧以这种方式出现。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢或不喜欢的部分。读者反馈对我们来说非常重要，它帮助我们开发出您真正能够受益的书籍。若要向我们发送一般反馈，只需发送电子邮件至`feedback@packtpub.com`，并在邮件主题中提及书名。如果您在某个领域有专业知识并且有兴趣撰写或为书籍贡献内容，请参考我们的作者指南：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经成为 Packt 图书的骄傲拥有者，我们为您提供了许多资源，帮助您最大化您的购买收益。

# 下载示例代码

您可以从您的账户在[`www.packtpub.com`](http://www.packtpub.com)下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，并注册让我们直接通过电子邮件将文件发送给您。您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的支持标签上。

1.  点击“代码下载与勘误”。

1.  在搜索框中输入书名。

1.  选择您要下载代码文件的书籍。

1.  从下拉菜单中选择您购买这本书的地方。

1.  点击“代码下载”。

您还可以通过点击书籍网页上的“代码文件”按钮下载代码文件。您可以通过在搜索框中输入书名访问该页面。请注意，您需要登录您的 Packt 账户。下载文件后，请确保使用最新版本的解压软件来解压或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

本书的代码包也托管在 GitHub 上：[`github.com/PacktPublishing/NGINX-Cookbook`](https://github.com/PacktPublishing/NGINX-Cookbook)。我们还有其他来自我们丰富书籍和视频目录的代码包，可以在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**找到。快去看看吧！

# 下载本书的彩色图片

我们还为您提供了一个包含本书中使用的截图/图表的彩色图像的 PDF 文件。这些彩色图像将帮助您更好地理解输出的变化。您可以从[`www.packtpub.com/sites/default/files/downloads/NGINXCookbook_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/NGINXCookbook_ColorImages.pdf)下载该文件。

# 勘误

尽管我们已尽最大努力确保内容的准确性，但错误仍然会发生。如果您发现我们书中的错误——可能是文本或代码中的错误——我们将非常感激您报告此问题。这样，您可以帮助其他读者避免困惑，并帮助我们改进书籍的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)报告，选择您的书籍，点击“勘误提交表单”链接，并输入勘误的详细信息。一旦您的勘误被验证，您的提交将被接受，勘误将上传到我们的网站或添加到该书标题的勘误部分的现有勘误列表中。要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索框中输入书名。所需的信息将出现在勘误部分。

# 盗版

互联网盗版是一个跨所有媒体的持续性问题。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上发现我们的作品以任何形式的非法复制，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。请通过`copyright@packtpub.com`与我们联系，并附上涉嫌盗版材料的链接。感谢您帮助我们保护作者和我们为您提供有价值内容的能力。

# 问题

如果您在本书的任何方面遇到问题，可以通过`questions@packtpub.com`联系我们，我们将尽力解决问题。
