<html><head></head><body>
<div id="_idContainer025">
<h1 class="chapter-number" id="_idParaDest-65"><a id="_idTextAnchor179"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-66"><a id="_idTextAnchor180"/><span class="koboSpan" id="kobo.2.1">Exploring the HTTP Configuration</span></h1>
<p><span class="koboSpan" id="kobo.3.1">At this stage, we have a working NGINX setup—not only is it installed on the system and launched automatically on startup but it’s also organized and optimized with the help of basic directives. </span><span class="koboSpan" id="kobo.3.2">It’s now time to go one step further into the configuration by discovering the HTTP core module. </span><span class="koboSpan" id="kobo.3.3">This module is an essential component of the HTTP configuration—it allows you to set up websites to be served, also referred to as </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">virtual hosts.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This chapter will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.7.1">An introduction to the HTTP core module and its three </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">new blocks</span></span></li>
<li><span class="koboSpan" id="kobo.9.1">Exploring the HTTP core </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">module directives</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Exploring the directives </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">of HTTP/2</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Exploring the variables introduced by the HTTP </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">core module</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Understanding and exploring the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.16.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.17.1"> block</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.18.1">By the end of this chapter, you will know all the main points about configuring the NGINX server, its modules, and you will be able to host your </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">first website.</span></span><a id="_idTextAnchor181"/></p>
<h1 id="_idParaDest-67"><a id="_idTextAnchor182"/><span class="koboSpan" id="kobo.20.1">An introduction to the HTTP core module and its three new blocks</span></h1>
<p><span class="koboSpan" id="kobo.21.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.22.1">HTTP core module</span></strong><span class="koboSpan" id="kobo.23.1"> is </span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.24.1">the component that contains all of the fundamental blocks, directives, and variables of the HTTP server. </span><span class="koboSpan" id="kobo.24.2">It’s enabled by default when you configure the build (as described in </span><a href="B21787_01.xhtml#_idTextAnchor014"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.25.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.26.1">), but it’s actually optional—you can decide not to include it in your custom build. </span><span class="koboSpan" id="kobo.26.2">Doing so will completely disable all HTTP functionalities, and all of the other HTTP modules will not be compiled. </span><span class="koboSpan" id="kobo.26.3">Obviously, if you purchased this book, it’s highly likely that you are interested in the web-serving capacities of NGINX, so you will have </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">this enabled.</span></span></p>
<p><span class="koboSpan" id="kobo.28.1">This module is </span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.29.1">the largest of all standard NGINX modules—it provides an impressive number of directives and variables. </span><span class="koboSpan" id="kobo.29.2">In order to understand all of these new elements and how they come into play, we first need to understand the logical organization introduced by the three main blocks—</span><strong class="source-inline"><span class="koboSpan" id="kobo.30.1">http</span></strong><span class="koboSpan" id="kobo.31.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.32.1">server</span></strong><span class="koboSpan" id="kobo.33.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">location</span><a id="_idTextAnchor183"/></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">In the previous chapter, we discovered the core module by studying the default NGINX configuration file, which includes a sequence of directives and values with no apparent organization. </span><span class="koboSpan" id="kobo.37.2">Then came the </span><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">events</span></strong><span class="koboSpan" id="kobo.39.1"> module, which introduced the first block, (</span><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">events</span></strong><span class="koboSpan" id="kobo.41.1">). </span><span class="koboSpan" id="kobo.41.2">This block is the only placeholder for all directives brought in by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.42.1">events</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.43.1"> module.</span></span></p>
<p><span class="koboSpan" id="kobo.44.1">As it turns out, the HTTP module introduces three new </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">logical blocks:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.46.1">http</span></strong><span class="koboSpan" id="kobo.47.1">: This block</span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.48.1"> is inserted at the root of the configuration file. </span><span class="koboSpan" id="kobo.48.2">It allows you to start defining directives and blocks from all modules related to the HTTP facet of NGINX. </span><span class="koboSpan" id="kobo.48.3">Although there is no real purpose in doing so, the block can be inserted multiple times, in which case the directive values inserted in the last block will override the </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">previous ones.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">server</span></strong><span class="koboSpan" id="kobo.51.1">: This block</span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.52.1"> allows you to declare a website. </span><span class="koboSpan" id="kobo.52.2">In other words, a specific website (identified by one or more hostnames—for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.53.1">www.mywebsite.com</span></strong><span class="koboSpan" id="kobo.54.1">) becomes acknowledged by NGINX and receives its own configuration. </span><span class="koboSpan" id="kobo.54.2">This block can only be used within the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.55.1">http</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.56.1"> block.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.57.1">location</span></strong><span class="koboSpan" id="kobo.58.1">: This </span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.59.1">block lets you define a group of settings to be applied to a particular location on a website. </span><span class="koboSpan" id="kobo.59.2">This block can be used within a </span><strong class="source-inline"><span class="koboSpan" id="kobo.60.1">server</span></strong><span class="koboSpan" id="kobo.61.1"> block or nested within another </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.63.1"> block.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.64.1">The following diagram summarizes the final structure by providing a couple of basic examples corresponding to </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">actual situations:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer024">
<span class="koboSpan" id="kobo.66.1"><img alt="Figure 3.1: Diagram showing block structure and hierarchy with a few examples" src="image/B21787_03_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.67.1">Figure 3.1: Diagram showing block structure and hierarchy with a few examples</span></p>
<p><span class="koboSpan" id="kobo.68.1">The </span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.69.1">HTTP section, defined by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">http{...}</span></strong><span class="koboSpan" id="kobo.71.1"> block, encompasses the entire web-related configuration. </span><span class="koboSpan" id="kobo.71.2">It may contain one or more </span><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">server{...}</span></strong><span class="koboSpan" id="kobo.73.1"> blocks, defining the domains and subdomains that you are hosting. </span><span class="koboSpan" id="kobo.73.2">For each of these websites, you have the possibility of defining </span><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">location</span></strong><span class="koboSpan" id="kobo.75.1"> blocks that let you apply additional settings to a particular request URI, or request URIs matching </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">a pattern.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">Remember that the principle of setting inheritance applies here. </span><span class="koboSpan" id="kobo.77.2">If you define a setting at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">http{...}</span></strong><span class="koboSpan" id="kobo.79.1"> block level (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">gzip on</span></strong><span class="koboSpan" id="kobo.81.1"> to enable gzip compression), the setting will preserve its value in the potentially incorporated </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">server</span></strong><span class="koboSpan" id="kobo.83.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.85.1"> blocks:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.86.1">
http {
   # Enable gzip compression at the http block level
   gzip on;
   server {
      server_name localhost;
       listen 80;
      # At this stage, gzip still set to on
      location /downloads/ {
          gzip off;
     #    This directive only applies to documents found
     #    in /downloads/
      }
   </span><a id="_idTextAnchor184"/><span class="koboSpan" id="kobo.87.1">}
}</span></pre> <p><span class="koboSpan" id="kobo.88.1">We have</span><a id="_idIndexMarker118"/><span class="koboSpan" id="kobo.89.1"> learned about the NGINX block structure, and we have put it into practice with a concrete example. </span><span class="koboSpan" id="kobo.89.2">We will now cover the modules available in each of these </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">three bl</span><a id="_idTextAnchor185"/><span class="koboSpan" id="kobo.91.1">ocks.</span></span></p>
<h1 id="_idParaDest-68"><a id="_idTextAnchor186"/><span class="koboSpan" id="kobo.92.1">Exploring the HTTP core module directives</span></h1>
<p><span class="koboSpan" id="kobo.93.1">At each</span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.94.1"> of the three levels (the blocks discussed previously), directives can be inserted in order to affect the behavior of the web server. </span><span class="koboSpan" id="kobo.94.2">The</span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.95.1"> following subsections cover all directives that are introduced by the main HTTP module, grouped thematically. </span><span class="koboSpan" id="kobo.95.2">For each directive, an indication regarding the context is given. </span><span class="koboSpan" id="kobo.95.3">Some cannot be used at certain levels. </span><span class="koboSpan" id="kobo.95.4">For instance, it would make no sense to insert a </span><strong class="source-inline"><span class="koboSpan" id="kobo.96.1">server_name</span></strong><span class="koboSpan" id="kobo.97.1"> directive at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.98.1">http</span></strong><span class="koboSpan" id="kobo.99.1"> block level, since </span><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">server_name</span></strong><span class="koboSpan" id="kobo.101.1"> is a directive directly affecting a virtual host—it should only be inserted in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">server</span></strong><span class="koboSpan" id="kobo.103.1"> block.  </span><span class="koboSpan" id="kobo.103.2">To that extent, the table indicates the possible levels where each directive is allowed—the </span><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">http</span></strong><span class="koboSpan" id="kobo.105.1"> block, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.106.1">server</span></strong><span class="koboSpan" id="kobo.107.1"> block, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">location</span></strong><span class="koboSpan" id="kobo.109.1"> block, and, additionally, the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">if</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.111.1"> block.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.112.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.113.1">This documentation is valid as of Stable version </span><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">1.25</span></strong><span class="koboSpan" id="kobo.115.1">. </span><span class="koboSpan" id="kobo.115.2">Future updates may alter the </span><em class="italic"><span class="koboSpan" id="kobo.116.1">syntax of some directives</span></em><span class="koboSpan" id="kobo.117.1"> or provide new features that are not </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">discuss</span><a id="_idTextAnchor187"/><span class="koboSpan" id="kobo.119.1">e</span><a id="_idTextAnchor188"/><span class="koboSpan" id="kobo.120.1">d here.</span></span></p>
<h2 id="_idParaDest-69"><a id="_idTextAnchor189"/><span class="koboSpan" id="kobo.121.1">Socket and host configuration</span></h2>
<p><span class="koboSpan" id="kobo.122.1">This</span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.123.1"> set of directives will allow you to configure your virtual hosts, in practice, by creating </span><strong class="source-inline"><span class="koboSpan" id="kobo.124.1">server</span></strong><span class="koboSpan" id="kobo.125.1"> blocks that you identify either by a hostname or by an IP address and port combination. </span><span class="koboSpan" id="kobo.125.2">In addition, some</span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.126.1"> directives will let you fine-tune your network settings by configuring TCP </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">socke</span><a id="_idTextAnchor190"/><span class="koboSpan" id="kobo.128.1">t</span><a id="_idTextAnchor191"/><span class="koboSpan" id="kobo.129.1"> options.</span></span></p>
<h3><span class="koboSpan" id="kobo.130.1">listen</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.131.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.134.1">Specifies the</span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.135.1"> IP address and/or the port to be used by the listening socket that will serve the website. </span><span class="koboSpan" id="kobo.135.2">Sites are generally served on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.136.1">80</span></strong><span class="koboSpan" id="kobo.137.1"> (the default value) via HTTP or </span><strong class="source-inline"><span class="koboSpan" id="kobo.138.1">443</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.139.1">via HTTPS.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.140.1">Syntax</span></strong><span class="koboSpan" id="kobo.141.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.142.1">listen [address][:port] [</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">additional options];</span></strong></span></p>
<p><span class="koboSpan" id="kobo.144.1">Additional options include </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">the following:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">default_server</span></strong><span class="koboSpan" id="kobo.147.1">: Specifies that this </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">server</span></strong><span class="koboSpan" id="kobo.149.1"> block is to be used as the default website for any request received at the specified IP address </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">and port</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.151.1">ssl</span></strong><span class="koboSpan" id="kobo.152.1">: Specifies that the website should be served </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">using SSL</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">http2</span></strong><span class="koboSpan" id="kobo.155.1">: Enables support for the HTTP/2 protocol, if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">http2</span></strong><span class="koboSpan" id="kobo.157.1"> module </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">is present</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">proxy_protocol</span></strong><span class="koboSpan" id="kobo.160.1">: Enables the proxy protocol for all connections accepted on </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">this port</span></span></li>
<li><span class="koboSpan" id="kobo.162.1">Other options are related to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1">bind</span></strong><span class="koboSpan" id="kobo.164.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">listen</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.166.1">system calls:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.167.1">
backlog=num, rcvbuf=size, sndbuf=size, accept_filter=filter, deferred, setfib=number, fastopen=number, ipv6only=on|off, reuseport, so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt], bind, http2</span></pre></li> <li><span class="koboSpan" id="kobo.168.1">Here are </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">some examples:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.170.1">
listen 192.168.1.1:80; listen 127.0.0.1;
listen 80 default_server;
listen [:::a8c9:1234]:80; # IPv6 addresses must be put between square brackets
listen 443 </span><a id="_idTextAnchor192"/><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.171.1">ssl http2;</span></pre></li> </ul>
<h3><span class="koboSpan" id="kobo.172.1">server_name</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.173.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.175.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.176.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">server_name</span></strong><span class="koboSpan" id="kobo.178.1"> directive </span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.179.1">assigns one or more hostnames to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">server</span></strong><span class="koboSpan" id="kobo.181.1"> block. </span><span class="koboSpan" id="kobo.181.2">When NGINX receives an HTTP request, it matches the </span><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">Host</span></strong><span class="koboSpan" id="kobo.183.1"> header of the request against all </span><strong class="source-inline"><span class="koboSpan" id="kobo.184.1">server</span></strong><span class="koboSpan" id="kobo.185.1"> blocks. </span><span class="koboSpan" id="kobo.185.2">The first </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">server</span></strong><span class="koboSpan" id="kobo.187.1"> block to match this hostname </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">is selected.</span></span></p>
<p><span class="koboSpan" id="kobo.189.1">If no </span><strong class="source-inline"><span class="koboSpan" id="kobo.190.1">server</span></strong><span class="koboSpan" id="kobo.191.1"> block matches the desired host, NGINX selects the first </span><strong class="source-inline"><span class="koboSpan" id="kobo.192.1">server</span></strong><span class="koboSpan" id="kobo.193.1"> block that matches the parameters of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">listen</span></strong><span class="koboSpan" id="kobo.195.1"> directive (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">listen *:80</span></strong><span class="koboSpan" id="kobo.197.1"> would be a catch-all for all requests received on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">80</span></strong><span class="koboSpan" id="kobo.199.1">), giving priority to the first block that has the </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">default_server</span></strong><span class="koboSpan" id="kobo.201.1"> option enabled on the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">listen</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.203.1"> directive.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.204.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.205.1">This directive accepts wildcards as well as regular expressions. </span><span class="koboSpan" id="kobo.205.2">In this case, the hostname should start with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">~</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.207.1">character.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.208.1">Syntax</span></strong><span class="koboSpan" id="kobo.209.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">server_name </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">hostname1 [hostname2...];</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.212.1">Examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.214.1">
server_name www.website.com;
server_name www.website.com website.com;
server_name *.website.com;
server_name .website.com; # combines both *.website.com and website.com
server_name *.website.*;
server_name ~^(www)\.example\.com$; # $1 = www</span></pre> <p><span class="koboSpan" id="kobo.215.1">You may use an empty string as the directive value in order to catch all requests that do not come</span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.216.1"> with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">Host</span></strong><span class="koboSpan" id="kobo.218.1"> header, but only after at least one regular name (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">_</span></strong><span class="koboSpan" id="kobo.220.1"> for a </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">dummy hostname):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.222.1">
server_name website.com "";
server</span><a id="_idTextAnchor194"/><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.223.1">_name _ "";</span></pre> <h3><span class="koboSpan" id="kobo.224.1">server_name_in_redirect</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.225.1">Context</span></strong><span class="koboSpan" id="kobo.226.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">http</span></strong><span class="koboSpan" id="kobo.228.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">server</span></strong><span class="koboSpan" id="kobo.230.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.233.1">This</span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.234.1"> directive applies to internal redirects. </span><span class="koboSpan" id="kobo.234.2">If set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">on</span></strong><span class="koboSpan" id="kobo.236.1">, NGINX will use the first hostname specified in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">server_name</span></strong><span class="koboSpan" id="kobo.238.1"> directive. </span><span class="koboSpan" id="kobo.238.2">If set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">off</span></strong><span class="koboSpan" id="kobo.240.1">, NGINX will use the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">Host</span></strong><span class="koboSpan" id="kobo.242.1"> header from the </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">HTTP request.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.244.1">Syntax</span></strong><span class="koboSpan" id="kobo.245.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.247.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.249.1">Defa</span><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.250.1">u</span><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.251.1">lt </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.252.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.255.1">server_names_hash_max_size</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.256.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.258.1">http</span></strong></span></p>
<p><span class="koboSpan" id="kobo.259.1">NGINX uses</span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.260.1"> hash tables for various data collections (maps, mimes, headers, and so on) in order to speed up the processing of requests. </span><span class="koboSpan" id="kobo.260.2">This directive defines the maximum size of the server names hash table. </span><span class="koboSpan" id="kobo.260.3">The default value should fit with most configurations. </span><span class="koboSpan" id="kobo.260.4">If this needs to be changed, NGINX will automatically tell you on startup or when you reload </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">its configuration.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.262.1">Syntax</span></strong><span class="koboSpan" id="kobo.263.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">Numeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.265.1">Defa</span><a id="_idTextAnchor198"/><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.266.1">ult </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.267.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">512</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.270.1">server_names_hash_bucket_size</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.271.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">http</span></strong></span></p>
<p><span class="koboSpan" id="kobo.274.1">Sets the</span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.275.1"> bucket size for the server names hash table. </span><span class="koboSpan" id="kobo.275.2">Similarly, you should only change this value if NGINX tells </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">you to.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.277.1">Syntax</span></strong><span class="koboSpan" id="kobo.278.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">Numeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.280.1">Default value</span></strong><span class="koboSpan" id="kobo.281.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">32</span></strong><span class="koboSpan" id="kobo.283.1"> (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">64</span></strong><span class="koboSpan" id="kobo.285.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">128</span></strong><span class="koboSpan" id="kobo.287.1">, depending on your processor </span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">cache </span><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.289.1">s</span><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.290.1">pecifications).</span></span></p>
<h3><span class="koboSpan" id="kobo.291.1">port_in_redirect</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.292.1">Context</span></strong><span class="koboSpan" id="kobo.293.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">http</span></strong><span class="koboSpan" id="kobo.295.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">server</span></strong><span class="koboSpan" id="kobo.297.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.300.1">If disabled, redirects</span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.301.1"> issued by NGINX will </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">be relative.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.303.1">Syntax</span></strong><span class="koboSpan" id="kobo.304.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.306.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">off</span></strong></span></p>
<p><strong class="bold"><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.308.1">D</span><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.309.1">efault </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.310.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">on</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.313.1">absolute_redirect</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.314.1">Context</span></strong><span class="koboSpan" id="kobo.315.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">http</span></strong><span class="koboSpan" id="kobo.317.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">server</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.320.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.321.1">In the case </span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.322.1">of a redirect, this directive defines whether or not NGINX should append the port number to the </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">redirection URL.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.324.1">Syntax</span></strong><span class="koboSpan" id="kobo.325.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.327.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">off</span></strong></span><strong class="source-inline"><a id="_idTextAnchor204"/><a id="_idTextAnchor205"/><a id="_idTextAnchor206"/></strong></p>
<p><strong class="bold"><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.329.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.330.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">on</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.333.1">sendfile</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.334.1">Context</span></strong><span class="koboSpan" id="kobo.335.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">http</span></strong><span class="koboSpan" id="kobo.337.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">server</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.341.1">If this </span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.342.1">directive is enabled, NGINX will use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">sendfile</span></strong><span class="koboSpan" id="kobo.344.1"> kernel call to handle file transmission. </span><span class="koboSpan" id="kobo.344.2">If disabled, NGINX will handle the file transfer by itself. </span><span class="koboSpan" id="kobo.344.3">Depending on the physical location of the file being transmitted (such as NFS), this option may affect the </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">server’s performance.</span></span></p>
<p><span class="koboSpan" id="kobo.346.1">On Linux, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.347.1">sendfile</span></strong><span class="koboSpan" id="kobo.348.1"> automatically disables asynchronous I/O. </span><span class="koboSpan" id="kobo.348.2">If using FreeBSD, it is possible to combine the use of </span><strong class="source-inline"><span class="koboSpan" id="kobo.349.1">aio</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.350.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">sendfile</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.353.1">Syntax</span></strong><span class="koboSpan" id="kobo.354.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.356.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">off</span></strong></span></p>
<p><strong class="bold"><a id="_idTextAnchor208"/><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.358.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.359.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.362.1">sendfile_max_chunk</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.363.1">Context</span></strong><span class="koboSpan" id="kobo.364.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.366.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.368.1">This </span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.369.1">directive defines a maximum data size to be used for each call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">sendfile</span></strong><span class="koboSpan" id="kobo.371.1"> (read the </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">previous entry).</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.373.1">Syntax</span></strong><span class="koboSpan" id="kobo.374.1">: Numeric </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">value (si</span><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.376.1">z</span><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.377.1">e)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.378.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.379.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">0</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.382.1">send_lowat</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.383.1">Context</span></strong><span class="koboSpan" id="kobo.384.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.386.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.387.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.388.1">An option </span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.389.1">allowing you to make use of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">SO_SNDLOWAT</span></strong><span class="koboSpan" id="kobo.391.1"> flag for TCP sockets under FreeBSD only. </span><span class="koboSpan" id="kobo.391.2">This value defines the minimum number of bytes in the buffer for </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">output operations.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.393.1">Syntax</span></strong><span class="koboSpan" id="kobo.394.1">: Numeric </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">value (s</span><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.396.1">i</span><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.397.1">ze)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.398.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.399.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">0</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.402.1">reset_timedout_connection</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.403.1">Context</span></strong><span class="koboSpan" id="kobo.404.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">http</span></strong><span class="koboSpan" id="kobo.406.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">server</span></strong><span class="koboSpan" id="kobo.408.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.411.1">When a </span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.412.1">client connection times out, its associated information may remain in memory depending on the state it was in. </span><span class="koboSpan" id="kobo.412.2">Enabling this directive will erase all memory associated with the connection after it </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">times out.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.414.1">Syntax</span></strong><span class="koboSpan" id="kobo.415.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.417.1">or </span><a id="_idTextAnchor214"/></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">o</span><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.419.1">ff</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.420.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.421.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">off</span></strong></span></p>
<h2 id="_idParaDest-70"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.424.1">Paths and documents</span></h2>
<p><span class="koboSpan" id="kobo.425.1">This </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.426.1">section</span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.427.1"> describes directives that configure the documents that should be served for each website, such as the document root, the site index,</span><a id="_idTextAnchor217"/> <a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.428.1">error pages, and </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">so on.</span></span></p>
<h3><span class="koboSpan" id="kobo.430.1">root</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.431.1">Context</span></strong><span class="koboSpan" id="kobo.432.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">http</span></strong><span class="koboSpan" id="kobo.434.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.435.1">server</span></strong><span class="koboSpan" id="kobo.436.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">location</span></strong><span class="koboSpan" id="kobo.438.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1">if</span></strong><span class="koboSpan" id="kobo.440.1">. </span><span class="koboSpan" id="kobo.440.2">Variables </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">are accepted.</span></span></p>
<p><span class="koboSpan" id="kobo.442.1">Defines the </span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.443.1">document root, containing the files you wish to serve to </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">your visitors.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.445.1">Syntax</span></strong><span class="koboSpan" id="kobo.446.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">Directory path</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.448.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.449.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">html</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.452.1">Example</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.454.1">
root /home</span><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.455.1">/</span><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.456.1">website.com/public_html;</span></pre> <h3><span class="koboSpan" id="kobo.457.1">alias</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.458.1">Context</span></strong><span class="koboSpan" id="kobo.459.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">location</span></strong><span class="koboSpan" id="kobo.461.1">. </span><span class="koboSpan" id="kobo.461.2">Variables </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">are accepted.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.463.1">Syntax</span></strong><span class="koboSpan" id="kobo.464.1">: Directory (do not forget the trailing </span><strong class="source-inline"><span class="koboSpan" id="kobo.465.1">/</span></strong><span class="koboSpan" id="kobo.466.1">) or </span><span class="No-Break"><span class="koboSpan" id="kobo.467.1">file path</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">alias</span></strong><span class="koboSpan" id="kobo.469.1"> is a </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.470.1">directive that you place in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.471.1">location</span></strong><span class="koboSpan" id="kobo.472.1"> block only. </span><span class="koboSpan" id="kobo.472.2">It assigns a different path for NGINX to retrieve documents for a specific request. </span><span class="koboSpan" id="kobo.472.3">As an example, consider the </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">following configuration:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.474.1">
http {
   server {
       server_name localhost;
       root /var/www/website.com/html;
        location /admin/ {
        alias /var/www/locked/;
      }
   }
}</span></pre> <p><span class="koboSpan" id="kobo.475.1">When a request for </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">http://localhost/</span></strong><span class="koboSpan" id="kobo.477.1"> is received, files are served from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">/var/www/website.com/html/</span></strong><span class="koboSpan" id="kobo.479.1"> folder. </span><span class="koboSpan" id="kobo.479.2">However, if NGINX receives a request for </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">http://localhost/admin/</span></strong><span class="koboSpan" id="kobo.481.1">, the path used to retrieve the files is </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">/home/website.com/locked/</span></strong><span class="koboSpan" id="kobo.483.1">. </span><span class="koboSpan" id="kobo.483.2">Moreover, the value of the document root directive (</span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">root</span></strong><span class="koboSpan" id="kobo.485.1">) is not altered. </span><span class="koboSpan" id="kobo.485.2">This procedure is invisible in th</span><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.486.1">e</span><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.487.1"> eyes of </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">dynamic scripts.</span></span></p>
<h3><span class="koboSpan" id="kobo.489.1">error_page</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.490.1">Context</span></strong><span class="koboSpan" id="kobo.491.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">http</span></strong><span class="koboSpan" id="kobo.493.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">server</span></strong><span class="koboSpan" id="kobo.495.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">location</span></strong><span class="koboSpan" id="kobo.497.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">if</span></strong><span class="koboSpan" id="kobo.499.1">. </span><span class="koboSpan" id="kobo.499.2">Variables </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">are accepted.</span></span></p>
<p><span class="koboSpan" id="kobo.501.1">Allows you to</span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.502.1"> affect URIs to HTTP response code and, optionally, to replace the code </span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">with another.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.504.1">Syntax</span></strong><span class="koboSpan" id="kobo.505.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">error_page code1 [code2...] [=replacement code] [=@block | URI]</span></strong><span class="koboSpan" id="kobo.507.1">, where the replacement code (denoted by </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">=code</span></strong><span class="koboSpan" id="kobo.509.1">) is one of </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">301</span></strong><span class="koboSpan" id="kobo.511.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">302</span></strong><span class="koboSpan" id="kobo.513.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">303</span></strong><span class="koboSpan" id="kobo.515.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">307</span></strong><span class="koboSpan" id="kobo.517.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.519.1">308</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.520.1">Examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.522.1">
error_page 404 /not_found.html;
error_page 500 501 502 503 504 /server_error.html;
error_page 403 http://website.com/;
error_page 404 @notfound; # jump to a named location block
error_page 404 =200 /index.html; # in case of 404 error, redirect to index.html w</span><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.523.1">i</span><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.524.1">th a 200 OK response code</span></pre> <h3><span class="koboSpan" id="kobo.525.1">if_modified_since</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.526.1">Context</span></strong><span class="koboSpan" id="kobo.527.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">http</span></strong><span class="koboSpan" id="kobo.529.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">server</span></strong><span class="koboSpan" id="kobo.531.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.532.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.534.1">Defines</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.535.1"> how NGINX handles the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">If-Modified-Since</span></strong><span class="koboSpan" id="kobo.537.1"> HTTP header. </span><span class="koboSpan" id="kobo.537.2">This header is mostly used by search engine spiders (such as Google web crawling bots). </span><span class="koboSpan" id="kobo.537.3">The robot indicates the date and time of the last pass. </span><span class="koboSpan" id="kobo.537.4">If the requested file has not been modified since then, the server simply returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">304 Not Modified</span></strong><span class="koboSpan" id="kobo.539.1"> response code with </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">no body.</span></span></p>
<p><span class="koboSpan" id="kobo.541.1">This directive accepts the following </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">three values:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">off</span></strong><span class="koboSpan" id="kobo.544.1">: Ignores the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">If-Modified-Since</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.546.1"> header.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">exact</span></strong><span class="koboSpan" id="kobo.548.1">: Returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">304 Not Modified</span></strong><span class="koboSpan" id="kobo.550.1"> if the date and time specified in the HTTP header are an exact match with the actual requested file modification date. </span><span class="koboSpan" id="kobo.550.2">If the file modification date is earlier or later, the file is served normally (</span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">200 </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.552.1">OK</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.553.1"> response).</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.554.1">before</span></strong><span class="koboSpan" id="kobo.555.1">: Returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.556.1">304 Not Modified</span></strong><span class="koboSpan" id="kobo.557.1"> if the date and time specified in the HTTP header </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.558.1">is earlier than, or equal to, the requested file </span><span class="No-Break"><span class="koboSpan" id="kobo.559.1">modification date.</span></span></li>
</ul>
<p><strong class="bold"><span class="koboSpan" id="kobo.560.1">Syntax</span></strong><span class="koboSpan" id="kobo.561.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.562.1">if_modified_since off | exact </span><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.563.1">|</span><a id="_idTextAnchor226"/> </strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">before</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.565.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.566.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.567.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">exact</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.569.1">index</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.570.1">Context</span></strong><span class="koboSpan" id="kobo.571.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">http</span></strong><span class="koboSpan" id="kobo.573.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">server</span></strong><span class="koboSpan" id="kobo.575.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">location</span></strong><span class="koboSpan" id="kobo.577.1">. </span><span class="koboSpan" id="kobo.577.2">Variables </span><span class="No-Break"><span class="koboSpan" id="kobo.578.1">are accepted.</span></span></p>
<p><span class="koboSpan" id="kobo.579.1">Defines the</span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.580.1"> default page that NGINX will serve if no filename is specified in the request (in other words, the index page). </span><span class="koboSpan" id="kobo.580.2">You may specify multiple filenames, and the first file to be found will be served. </span><span class="koboSpan" id="kobo.580.3">If none of the specified files are found, NGINX will either attempt to generate an automatic index of the files if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">autoindex</span></strong><span class="koboSpan" id="kobo.582.1"> directive is enabled (check the </span><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">HTTP Autoindex</span></strong><span class="koboSpan" id="kobo.584.1"> module) or return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">403 Forbidden</span></strong><span class="koboSpan" id="kobo.586.1"> error page. </span><span class="koboSpan" id="kobo.586.2">Optionally, you may insert an absolute filename (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">/page.html</span></strong><span class="koboSpan" id="kobo.588.1">, based on the document root directory) but only as the last argument of </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">the directive.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.590.1">Syntax</span></strong><span class="koboSpan" id="kobo.591.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">index file1 [</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">file2...] [absolute_fi</span><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.594.1">le];</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.595.1">Defaul</span><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.596.1">t </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.597.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.599.1">index.html</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.600.1">Examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.602.1">
index index.php index.html index.htm;
index index.php index.php /catchall.php;</span></pre> <h3><span class="koboSpan" id="kobo.603.1">recursive_error_pages</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.604.1">Context</span></strong><span class="koboSpan" id="kobo.605.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.606.1">http</span></strong><span class="koboSpan" id="kobo.607.1">, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.608.1">server</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.610.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.611.1">Sometimes </span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.612.1">an error page, itself served by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.613.1">error_page</span></strong><span class="koboSpan" id="kobo.614.1"> directive, may trigger an error; in this case, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.615.1">error_page</span></strong><span class="koboSpan" id="kobo.616.1"> directive is used again (recursively). </span><span class="koboSpan" id="kobo.616.2">This directive enables or disables recursive </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">error pages.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.618.1">Synta</span><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.619.1">x</span><a id="_idTextAnchor230"/></strong><span class="koboSpan" id="kobo.620.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.622.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.624.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.625.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.628.1">try_files</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.629.1">Context</span></strong><span class="koboSpan" id="kobo.630.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">server</span></strong><span class="koboSpan" id="kobo.632.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1">location</span></strong><span class="koboSpan" id="kobo.634.1">. </span><span class="koboSpan" id="kobo.634.2">Variables </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">are accepted.</span></span></p>
<p><span class="koboSpan" id="kobo.636.1">Attempts to </span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.637.1">serve the specified files (arguments </span><em class="italic"><span class="koboSpan" id="kobo.638.1">1</span></em><span class="koboSpan" id="kobo.639.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.640.1">N-1</span></em><span class="koboSpan" id="kobo.641.1">); if none of these files exist, it jumps to the respective named </span><strong class="source-inline"><span class="koboSpan" id="kobo.642.1">location</span></strong><span class="koboSpan" id="kobo.643.1"> block (last argument) or serves the </span><span class="No-Break"><span class="koboSpan" id="kobo.644.1">specified URI.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.645.1">Syntax</span></strong><span class="koboSpan" id="kobo.646.1">: Multiple file paths, followed by a named </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">location</span></strong><span class="koboSpan" id="kobo.648.1"> block or </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">a URI</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.650.1">Example</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.652.1">
location / {
    try_files $uri $uri.html $uri.xml @proxy;
}
# the following is a "named location block"
location @proxy {
    proxy_pass 127.0.0.1:8080;
}</span></pre> <p><span class="koboSpan" id="kobo.653.1">In this example, NGINX tries to serve files normally. </span><span class="koboSpan" id="kobo.653.2">If the request URI does not correspond to any existing file, NGINX appends </span><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">.html</span></strong><span class="koboSpan" id="kobo.655.1"> to the URI and tries to serve the file again. </span><span class="koboSpan" id="kobo.655.2">If it still fails, it tries with </span><strong class="source-inline"><span class="koboSpan" id="kobo.656.1">.xml</span></strong><span class="koboSpan" id="kobo.657.1">. </span><span class="koboSpan" id="kobo.657.2">Eventually, if all of these possibilities fail, another </span><strong class="source-inline"><span class="koboSpan" id="kobo.658.1">location</span></strong><span class="koboSpan" id="kobo.659.1"> block (</span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">@proxy</span></strong><span class="koboSpan" id="kobo.661.1">) handles </span><span class="No-Break"><span class="koboSpan" id="kobo.662.1">the request.</span></span></p>
<p><span class="koboSpan" id="kobo.663.1">It is important to note that, except for the final argument, </span><strong class="source-inline"><span class="koboSpan" id="kobo.664.1">try_files</span></strong><span class="koboSpan" id="kobo.665.1"> will serve the literal file with no internal redirect. </span><span class="koboSpan" id="kobo.665.2">That means you </span><em class="italic"><span class="koboSpan" id="kobo.666.1">cannot</span></em><span class="koboSpan" id="kobo.667.1"> do a </span><strong class="source-inline"><span class="koboSpan" id="kobo.668.1">try_files</span></strong><span class="koboSpan" id="kobo.669.1"> directive as follows, as this would result in any file matching </span><strong class="source-inline"><span class="koboSpan" id="kobo.670.1">$uri.php</span></strong><span class="koboSpan" id="kobo.671.1"> being served with the PHP source code. </span><span class="koboSpan" id="kobo.671.2">This would leave a security vulnerability where a user could request a </span><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">/config</span></strong><span class="koboSpan" id="kobo.673.1"> URI and get the contents </span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.675.1">/config.php</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.677.1">
location / {
    try_files $uri $uri.php @proxy;
}
# the following is a "named location block"
location @proxy {
    proxy_pass 127.0.0.1:8080;
}</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.678.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.679.1">You may also specify </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">$uri/</span></strong><span class="koboSpan" id="kobo.681.1"> in the list of values in order to test for the existence</span><a id="_idTextAnchor231"/><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.682.1"> of a directory with </span><span class="No-Break"><span class="koboSpan" id="kobo.683.1">that name.</span></span></p>
<h2 id="_idParaDest-71"><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.684.1">Client requests</span></h2>
<p><span class="koboSpan" id="kobo.685.1">This section </span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.686.1">documents the way that </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.687.1">NGINX handles client requests. </span><span class="koboSpan" id="kobo.687.2">Among other things, you are allowed to configure the keep-alive mechanism behavior and possib</span><a id="_idTextAnchor234"/><span class="koboSpan" id="kobo.688.1">l</span><a id="_idTextAnchor235"/><span class="koboSpan" id="kobo.689.1">y log client requests </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">into files.</span></span></p>
<h3><span class="koboSpan" id="kobo.691.1">keepalive_requests</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.692.1">Context</span></strong><span class="koboSpan" id="kobo.693.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">http</span></strong><span class="koboSpan" id="kobo.695.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">server</span></strong><span class="koboSpan" id="kobo.697.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.699.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.700.1">Maximum number of </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.701.1">requests served over a single </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">keep-alive connection.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.703.1">Synta</span><a id="_idTextAnchor236"/><span class="koboSpan" id="kobo.704.1">x</span><a id="_idTextAnchor237"/></strong><span class="koboSpan" id="kobo.705.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">Numeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.707.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.708.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.709.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">100</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.711.1">keepalive_timeout</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.712.1">Context</span></strong><span class="koboSpan" id="kobo.713.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">http</span></strong><span class="koboSpan" id="kobo.715.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1">server</span></strong><span class="koboSpan" id="kobo.717.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.720.1">This </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.721.1">directive defines the number of seconds the server will wait before closing a keep-alive connection. </span><span class="koboSpan" id="kobo.721.2">The second (optional) parameter is transmitted as the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.722.1">Keep-Alive: timeout= &lt;HTTP response header&gt;</span></strong><span class="koboSpan" id="kobo.723.1">. </span><span class="koboSpan" id="kobo.723.2">The intended effect is to let the client browser close the connection itself after this period has elapsed. </span><span class="koboSpan" id="kobo.723.3">Note that some browsers ignore this setting. </span><span class="koboSpan" id="kobo.723.4">Internet Explorer, for instance, automatically closes the connection after around </span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">60 seconds.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.725.1">Syntax</span></strong><span class="koboSpan" id="kobo.726.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.727.1">keepalive_timeout </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">time1 [time2];</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.729.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.730.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.731.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">75</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.733.1">Examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.735.1">
keepalive_ti</span><a id="_idTextAnchor238"/><a id="_idTextAnchor239"/><span class="koboSpan" id="kobo.736.1">meout 75;
keepalive_timeout 75 60;</span></pre> <h3><span class="koboSpan" id="kobo.737.1">keepalive_disable</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.738.1">Context</span></strong><span class="koboSpan" id="kobo.739.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.740.1">http</span></strong><span class="koboSpan" id="kobo.741.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.742.1">server</span></strong><span class="koboSpan" id="kobo.743.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.744.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.745.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.746.1">This option</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.747.1"> allows you to disable the </span><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">keepalive</span></strong><span class="koboSpan" id="kobo.749.1"> functionality for browser families of </span><span class="No-Break"><span class="koboSpan" id="kobo.750.1">your choice.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.751.1">Syntax</span></strong><span class="koboSpan" id="kobo.752.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.753.1">keepalive_disable </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.754.1">br</span><a id="_idTextAnchor240"/><span class="koboSpan" id="kobo.755.1">o</span><a id="_idTextAnchor241"/><span class="koboSpan" id="kobo.756.1">wser1 browser2;</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.757.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.758.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.759.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.760.1">msie6</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.761.1">send_timeout</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.762.1">Context</span></strong><span class="koboSpan" id="kobo.763.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.764.1">http</span></strong><span class="koboSpan" id="kobo.765.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.766.1">server</span></strong><span class="koboSpan" id="kobo.767.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.769.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.770.1">The number </span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.771.1">of times after which NGINX closes an inactive connection. </span><span class="koboSpan" id="kobo.771.2">A connection becomes inactive the moment a client stops </span><span class="No-Break"><span class="koboSpan" id="kobo.772.1">transmitting data.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.773.1">Syntax</span></strong><span class="koboSpan" id="kobo.774.1">: Tim</span><a id="_idTextAnchor242"/><span class="koboSpan" id="kobo.775.1">e</span><a id="_idTextAnchor243"/><span class="koboSpan" id="kobo.776.1"> value (</span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">in seconds)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.778.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.779.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.780.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.781.1">60</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.782.1">client_body_in_file_only</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.783.1">Context</span></strong><span class="koboSpan" id="kobo.784.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.785.1">http</span></strong><span class="koboSpan" id="kobo.786.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.787.1">server</span></strong><span class="koboSpan" id="kobo.788.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.791.1">If this</span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.792.1"> directive is enabled, the body of incoming HTTP requests will be stored in actual files on the disk. </span><span class="koboSpan" id="kobo.792.2">The client body corresponds to the client HTTP request raw data, minus the headers (in other words, the content transmitted in </span><strong class="source-inline"><span class="koboSpan" id="kobo.793.1">POST</span></strong><span class="koboSpan" id="kobo.794.1"> requests). </span><span class="koboSpan" id="kobo.794.2">Files are stored as </span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">plain-text documents.</span></span></p>
<p><span class="koboSpan" id="kobo.796.1">This directive accepts </span><span class="No-Break"><span class="koboSpan" id="kobo.797.1">three values:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">off</span></strong><span class="koboSpan" id="kobo.799.1">: Do not store the request body in </span><span class="No-Break"><span class="koboSpan" id="kobo.800.1">a file</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.801.1">clean</span></strong><span class="koboSpan" id="kobo.802.1">: Store the request body in a file and remove the file after a request </span><span class="No-Break"><span class="koboSpan" id="kobo.803.1">is processed</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.804.1">on</span></strong><span class="koboSpan" id="kobo.805.1">: Store </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.806.1">the request body in a file, but do not remove the file after the request is processed (not recommended unless for </span><span class="No-Break"><span class="koboSpan" id="kobo.807.1">debugging purposes)</span></span></li>
</ul>
<p><strong class="bold"><span class="koboSpan" id="kobo.808.1">Syntax</span></strong><span class="koboSpan" id="kobo.809.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.810.1">client_body_in_file_</span><a id="_idTextAnchor244"/><span class="koboSpan" id="kobo.811.1">o</span><a id="_idTextAnchor245"/><span class="koboSpan" id="kobo.812.1">nly on | clean | </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.814.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.815.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.817.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.818.1">client_body_in_single_buffer</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.819.1">Context</span></strong><span class="koboSpan" id="kobo.820.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">http</span></strong><span class="koboSpan" id="kobo.822.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">server</span></strong><span class="koboSpan" id="kobo.824.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.825.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.826.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.827.1">Defines </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.828.1">whether or not NGINX should store the request body in a single buffer </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">in mem</span><a id="_idTextAnchor246"/><span class="koboSpan" id="kobo.830.1">o</span><a id="_idTextAnchor247"/><span class="koboSpan" id="kobo.831.1">ry.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.832.1">Syntax</span></strong><span class="koboSpan" id="kobo.833.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.835.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.836.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.837.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.838.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.839.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.840.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.841.1">client_body_buffer_size</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.842.1">Context</span></strong><span class="koboSpan" id="kobo.843.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">http</span></strong><span class="koboSpan" id="kobo.845.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.846.1">server</span></strong><span class="koboSpan" id="kobo.847.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.849.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.850.1">Specifies</span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.851.1"> the size of the buffer holding the body of client requests. </span><span class="koboSpan" id="kobo.851.2">If this size is exceeded, the body (or at least part of it) will be written to the disk. </span><span class="koboSpan" id="kobo.851.3">Note that, if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.852.1">client_body_in_file_only</span></strong><span class="koboSpan" id="kobo.853.1"> directive is enabled, request bodies are always stored into a file on the disk, regardless of their size (whether they fit in the buffer </span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">or not).</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.855.1">Syntax</span></strong><span class="koboSpan" id="kobo.856.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">Size value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.858.1">Default value</span></strong><span class="koboSpan" id="kobo.859.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.860.1">8k</span></strong><span class="koboSpan" id="kobo.861.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.862.1">16k</span></strong><span class="koboSpan" id="kobo.863.1"> (two memory page</span><a id="_idTextAnchor248"/><span class="koboSpan" id="kobo.864.1">s)</span><a id="_idTextAnchor249"/><span class="koboSpan" id="kobo.865.1"> depending on your </span><span class="No-Break"><span class="koboSpan" id="kobo.866.1">computer architecture.</span></span></p>
<h3><span class="koboSpan" id="kobo.867.1">client_body_temp_path</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.868.1">Context</span></strong><span class="koboSpan" id="kobo.869.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.870.1">http</span></strong><span class="koboSpan" id="kobo.871.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.872.1">server</span></strong><span class="koboSpan" id="kobo.873.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.875.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.876.1">Allows you to define the path of the directory that will store client request body files. </span><span class="koboSpan" id="kobo.876.2">An additional</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.877.1"> option lets you separate those files into a folder hierarchy over as many as </span><span class="No-Break"><span class="koboSpan" id="kobo.878.1">three levels.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.879.1">Syntax</span></strong><span class="koboSpan" id="kobo.880.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.881.1">client_body_temp_path path [level1] [</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.882.1">level2] [level3]</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.883.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.884.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.885.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">client_body_temp</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.887.1">Examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.889.1">
client_body_temp_path /tmp/nginx_rbf;
client_body_temp_path temp 2; # Nginx will create 2-digit folders to hold request body files
client_body_temp_path temp 1 2 4; # Nginx will create 3 levels of folders (first level: 1 digit, seco</span><a id="_idTextAnchor250"/><span class="koboSpan" id="kobo.890.1">nd level: 2 digits, third level: 4 digits)</span></pre> <h3><span class="koboSpan" id="kobo.891.1">client_body_timeout</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.892.1">Context</span></strong><span class="koboSpan" id="kobo.893.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.894.1">http</span></strong><span class="koboSpan" id="kobo.895.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">server</span></strong><span class="koboSpan" id="kobo.897.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.898.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.899.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.900.1">Defines the </span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.901.1">inactivity timeout while reading a client request body. </span><span class="koboSpan" id="kobo.901.2">A connection becomes inactive the moment the client stops transmitting data. </span><span class="koboSpan" id="kobo.901.3">If the delay is reached, NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.902.1">408 Request timeout</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.903.1">HTTP error.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.904.1">Synta</span><a id="_idTextAnchor251"/><span class="koboSpan" id="kobo.905.1">x</span><a id="_idTextAnchor252"/></strong><span class="koboSpan" id="kobo.906.1">: Time value (</span><span class="No-Break"><span class="koboSpan" id="kobo.907.1">in seconds)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.908.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.909.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.910.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">60</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.912.1">client_header_buffer_size</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.913.1">Context</span></strong><span class="koboSpan" id="kobo.914.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.915.1">http</span></strong><span class="koboSpan" id="kobo.916.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.917.1">server</span></strong><span class="koboSpan" id="kobo.918.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.919.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.921.1">This </span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.922.1">directive allows you to define the size of the buffer that NGINX allocates to request headers. </span><span class="koboSpan" id="kobo.922.2">Usually, </span><strong class="source-inline"><span class="koboSpan" id="kobo.923.1">1k</span></strong><span class="koboSpan" id="kobo.924.1"> is enough. </span><span class="koboSpan" id="kobo.924.2">However, in some cases, headers contain large chunks of cookie data, or the request URI is lengthy. </span><span class="koboSpan" id="kobo.924.3">If that is the case, then NGINX allocates one or more larger buffers (the size of larger buffers is defined by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.925.1">large_client_header_buffers</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.926.1"> dir</span><a id="_idTextAnchor253"/><span class="koboSpan" id="kobo.927.1">e</span><a id="_idTextAnchor254"/><span class="koboSpan" id="kobo.928.1">ctive).</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.929.1">Syntax</span></strong><span class="koboSpan" id="kobo.930.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.931.1">Size value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.932.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.933.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.934.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">1k</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.936.1">client_header_timeout</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.937.1">Context</span></strong><span class="koboSpan" id="kobo.938.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.939.1">http</span></strong><span class="koboSpan" id="kobo.940.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">server</span></strong><span class="koboSpan" id="kobo.942.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.943.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.945.1">Defines</span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.946.1"> the inactivity timeout while reading a client request header. </span><span class="koboSpan" id="kobo.946.2">A connection becomes inactive the moment the client stops transmitting data. </span><span class="koboSpan" id="kobo.946.3">If the delay is reached, NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">408 Request timeout</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.948.1">HTTP error.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.949.1">Syn</span><a id="_idTextAnchor255"/><span class="koboSpan" id="kobo.950.1">t</span><a id="_idTextAnchor256"/><span class="koboSpan" id="kobo.951.1">ax</span></strong><span class="koboSpan" id="kobo.952.1">: Time value (</span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">in seconds)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.954.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.955.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.956.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.957.1">60</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.958.1">client_max_body_size</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.959.1">Context</span></strong><span class="koboSpan" id="kobo.960.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.961.1">http</span></strong><span class="koboSpan" id="kobo.962.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.963.1">server</span></strong><span class="koboSpan" id="kobo.964.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.965.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.966.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.967.1">This is the</span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.968.1"> maximum size of a client request body. </span><span class="koboSpan" id="kobo.968.2">If this size is exceeded, NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.969.1">413 Request entity too large</span></strong><span class="koboSpan" id="kobo.970.1"> HTTP error. </span><span class="koboSpan" id="kobo.970.2">This setting is particularly important if you are going to allow users to upload files to your server </span><a id="_idTextAnchor257"/><span class="No-Break"><span class="koboSpan" id="kobo.971.1">o</span><a id="_idTextAnchor258"/><span class="koboSpan" id="kobo.972.1">ver HTTP.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.973.1">Syntax</span></strong><span class="koboSpan" id="kobo.974.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.975.1">Size value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.976.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.977.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.978.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.979.1">1m</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.980.1">large_client_header_buffers</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.981.1">Context</span></strong><span class="koboSpan" id="kobo.982.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.983.1">http</span></strong><span class="koboSpan" id="kobo.984.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.985.1">server</span></strong><span class="koboSpan" id="kobo.986.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.987.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.988.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.989.1">Defines</span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.990.1"> the number and size of larger buffers to be used for storing client requests, in the event the default buffer (</span><strong class="source-inline"><span class="koboSpan" id="kobo.991.1">client_header_buffer_size</span></strong><span class="koboSpan" id="kobo.992.1">) was insufficient. </span><span class="koboSpan" id="kobo.992.2">Each line of the header must fit in the size of a single buffer. </span><span class="koboSpan" id="kobo.992.3">If the request URI line is greater than the size of a single buffer, NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.993.1">414 Request URI too large</span></strong><span class="koboSpan" id="kobo.994.1"> error. </span><span class="koboSpan" id="kobo.994.2">If another header line exceeds the size of a single buffer, NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.995.1">400 Bad </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.996.1">request</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.997.1"> error.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.998.1">Syntax</span></strong><span class="koboSpan" id="kobo.999.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1000.1">large_client_header_</span><a id="_idTextAnchor259"/><span class="koboSpan" id="kobo.1001.1">b</span><a id="_idTextAnchor260"/><span class="koboSpan" id="kobo.1002.1">uffers </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1003.1">amount size</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1004.1">Default value</span></strong><span class="koboSpan" id="kobo.1005.1">: </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1006.1">4*8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1"> kilobytes</span></span></p>
<h3><span class="koboSpan" id="kobo.1008.1">lingering_time</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1009.1">Context</span></strong><span class="koboSpan" id="kobo.1010.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1011.1">http</span></strong><span class="koboSpan" id="kobo.1012.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1013.1">server</span></strong><span class="koboSpan" id="kobo.1014.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1015.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1017.1">This </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.1018.1">directive applies to client requests with a request body. </span><span class="koboSpan" id="kobo.1018.2">As soon as the amount of uploaded data exceeds </span><strong class="source-inline"><span class="koboSpan" id="kobo.1019.1">max_client_body_size</span></strong><span class="koboSpan" id="kobo.1020.1">, NGINX immediately sends a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1021.1">413 Request entity too large</span></strong><span class="koboSpan" id="kobo.1022.1"> HTTP error response. </span><span class="koboSpan" id="kobo.1022.2">However, most browsers continue uploading data regardless of that notification. </span><span class="koboSpan" id="kobo.1022.3">This directive defines the amount of time NGINX should wait after sending this error response before closing </span><span class="No-Break"><span class="koboSpan" id="kobo.1023.1">the connection.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1024.1">Synta</span><a id="_idTextAnchor261"/><span class="koboSpan" id="kobo.1025.1">x</span><a id="_idTextAnchor262"/></strong><span class="koboSpan" id="kobo.1026.1">: Numeric </span><span class="No-Break"><span class="koboSpan" id="kobo.1027.1">value (time)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1028.1">Default value</span></strong><span class="koboSpan" id="kobo.1029.1">: </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1030.1">30</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1"> seconds</span></span></p>
<h3><span class="koboSpan" id="kobo.1032.1">lingering_timeout</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1033.1">Context</span></strong><span class="koboSpan" id="kobo.1034.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1035.1">http</span></strong><span class="koboSpan" id="kobo.1036.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1037.1">server</span></strong><span class="koboSpan" id="kobo.1038.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1039.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1040.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1041.1">This </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.1042.1">directive defines the amount of time that NGINX should wait between two read operations before closing the </span><span class="No-Break"><span class="koboSpan" id="kobo.1043.1">client connection.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1044.1">Syn</span><a id="_idTextAnchor263"/><span class="koboSpan" id="kobo.1045.1">t</span><a id="_idTextAnchor264"/><span class="koboSpan" id="kobo.1046.1">ax</span></strong><span class="koboSpan" id="kobo.1047.1">: Numeric </span><span class="No-Break"><span class="koboSpan" id="kobo.1048.1">value (time)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1049.1">Default value</span></strong><span class="koboSpan" id="kobo.1050.1">: </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1051.1">5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1052.1"> seconds</span></span></p>
<h3><span class="koboSpan" id="kobo.1053.1">lingering_close</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1054.1">Context</span></strong><span class="koboSpan" id="kobo.1055.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1056.1">http</span></strong><span class="koboSpan" id="kobo.1057.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1058.1">server</span></strong><span class="koboSpan" id="kobo.1059.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1060.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1061.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1062.1">Controls</span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.1063.1"> the way NGINX closes client connections. </span><span class="koboSpan" id="kobo.1063.2">Set this to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1064.1">off</span></strong><span class="koboSpan" id="kobo.1065.1"> to immediately close connections after all request data has been received. </span><span class="koboSpan" id="kobo.1065.2">The default value (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1066.1">on</span></strong><span class="koboSpan" id="kobo.1067.1">) allows waiting time to process additional data if necessary. </span><span class="koboSpan" id="kobo.1067.2">If set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1068.1">always</span></strong><span class="koboSpan" id="kobo.1069.1">, NGINX will always wait to close the connection. </span><span class="koboSpan" id="kobo.1069.2">The amount of waiting time is defined by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1070.1">lingering_timeout</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1071.1"> dire</span><a id="_idTextAnchor265"/><span class="koboSpan" id="kobo.1072.1">c</span><a id="_idTextAnchor266"/><span class="koboSpan" id="kobo.1073.1">tive.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1074.1">Syntax</span></strong><span class="koboSpan" id="kobo.1075.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1076.1">on</span></strong><span class="koboSpan" id="kobo.1077.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1078.1">off</span></strong><span class="koboSpan" id="kobo.1079.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1080.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1081.1">always</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1082.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1083.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1085.1">on</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1086.1">ignore_invalid_headers</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1087.1">Context</span></strong><span class="koboSpan" id="kobo.1088.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1089.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1090.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1091.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1092.1">If this </span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.1093.1">directive is disabled, NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1094.1">400 Bad Request</span></strong><span class="koboSpan" id="kobo.1095.1"> HTTP error if request header</span><a id="_idTextAnchor267"/><span class="koboSpan" id="kobo.1096.1">s</span><a id="_idTextAnchor268"/> <span class="No-Break"><span class="koboSpan" id="kobo.1097.1">are malformed.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1098.1">Syntax</span></strong><span class="koboSpan" id="kobo.1099.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1100.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1101.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1102.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1103.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1104.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1105.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1106.1">on</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1107.1">chunked_transfer_encoding</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1108.1">Context</span></strong><span class="koboSpan" id="kobo.1109.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1110.1">http</span></strong><span class="koboSpan" id="kobo.1111.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">server</span></strong><span class="koboSpan" id="kobo.1113.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1115.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1116.1">Enables </span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.1117.1">or disables chunked transfer encoding for </span><span class="No-Break"><span class="koboSpan" id="kobo.1118.1">H</span><a id="_idTextAnchor269"/><span class="koboSpan" id="kobo.1119.1">T</span><a id="_idTextAnchor270"/><span class="koboSpan" id="kobo.1120.1">TP/1.1 requests.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1121.1">Syntax</span></strong><span class="koboSpan" id="kobo.1122.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1123.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1124.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1126.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1127.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1128.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1129.1">on</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1130.1">max_ranges</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1131.1">Context</span></strong><span class="koboSpan" id="kobo.1132.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1133.1">http</span></strong><span class="koboSpan" id="kobo.1134.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1135.1">server</span></strong><span class="koboSpan" id="kobo.1136.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1137.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1138.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1139.1">Defines</span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.1140.1"> how many byte ranges NGINX will serve when a client requests partial content from a file. </span><span class="koboSpan" id="kobo.1140.2">If you do not specify a value, there is no limit. </span><span class="koboSpan" id="kobo.1140.3">If you set this to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">0</span></strong><span class="koboSpan" id="kobo.1142.1">, the by</span><a id="_idTextAnchor271"/><span class="koboSpan" id="kobo.1143.1">t</span><a id="_idTextAnchor272"/><span class="koboSpan" id="kobo.1144.1">e range functionality </span><span class="No-Break"><span class="koboSpan" id="kobo.1145.1">is disabled.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1146.1">Syntax</span></strong><span class="koboSpan" id="kobo.1147.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1148.1">Size value</span></span></p>
<h2 id="_idParaDest-72"><a id="_idTextAnchor273"/><span class="koboSpan" id="kobo.1149.1">MIME types</span></h2>
<p><span class="koboSpan" id="kobo.1150.1">NGINX offers </span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.1151.1">two particular directives that will </span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.1152.1">help you configure MIME types: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1153.1">types</span></strong><span class="koboSpan" id="kobo.1154.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1155.1">default_type</span></strong><span class="koboSpan" id="kobo.1156.1">, which defines the default MIME types for documents. </span><span class="koboSpan" id="kobo.1156.2">This will affect the </span><a id="_idTextAnchor274"/><strong class="source-inline"><span class="koboSpan" id="kobo.1157.1">C</span><a id="_idTextAnchor275"/><span class="koboSpan" id="kobo.1158.1">ontent-Type</span></strong><span class="koboSpan" id="kobo.1159.1"> HTTP header sent within responses. </span><span class="No-Break"><span class="koboSpan" id="kobo.1160.1">Read on.</span></span></p>
<h3><span class="koboSpan" id="kobo.1161.1">types</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1162.1">Context</span></strong><span class="koboSpan" id="kobo.1163.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1164.1">http</span></strong><span class="koboSpan" id="kobo.1165.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1166.1">server</span></strong><span class="koboSpan" id="kobo.1167.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1168.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1169.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1170.1">This</span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.1171.1"> directive allows you to establish correlations between MIME types and file extensions. </span><span class="koboSpan" id="kobo.1171.2">It’s actually a block accepting a </span><span class="No-Break"><span class="koboSpan" id="kobo.1172.1">particular syntax:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1173.1">
types {
  mimetype1  extension1;
  mimetype2  extension2 [extension3...];
  [...]
}</span></pre> <p><span class="koboSpan" id="kobo.1174.1">When NGINX serves a file, it checks the file extension in order to determine the MIME type. </span><span class="koboSpan" id="kobo.1174.2">The MIME type is then sent as the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1175.1">Content-Type</span></strong><span class="koboSpan" id="kobo.1176.1"> HTTP header in the response. </span><span class="koboSpan" id="kobo.1176.2">This header may affect the way browsers handle files. </span><span class="koboSpan" id="kobo.1176.3">For example, if the MIME type of the file you are requesting is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1177.1">application/pdf</span></strong><span class="koboSpan" id="kobo.1178.1">, your browser may, for instance, attempt to render the file using a plugin associated with that MIME type instead of merely </span><span class="No-Break"><span class="koboSpan" id="kobo.1179.1">downloading it.</span></span></p>
<p><span class="koboSpan" id="kobo.1180.1">NGINX includes a basic set of MIME types as a standalone file (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1181.1">mime.types</span></strong><span class="koboSpan" id="kobo.1182.1">) to be included with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1183.1">include</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1184.1"> directive:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1185.1">
include mime.types;</span></pre> <p><span class="koboSpan" id="kobo.1186.1">This file already covers the most important file extensions, so you will probably not need to edit it. </span><span class="koboSpan" id="kobo.1186.2">If the extension of the served file is not found within the listed types, the default type is used, as defined by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1187.1">default_type</span></strong><span class="koboSpan" id="kobo.1188.1"> directive (see the </span><span class="No-Break"><span class="koboSpan" id="kobo.1189.1">next entry).</span></span></p>
<p><span class="koboSpan" id="kobo.1190.1">Note that you may override the list of types by re-declaring the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1191.1">types</span></strong><span class="koboSpan" id="kobo.1192.1"> block. </span><span class="koboSpan" id="kobo.1192.2">A useful example would be to force all files in a folder to be downloaded instead of </span><span class="No-Break"><span class="koboSpan" id="kobo.1193.1">being displayed:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1194.1">
http {
   include mime.types;
   [...]
   location /downloads/ {
       # removes all MIME types
       types { }
       default_type application/octet-stream;
    }
  [...]
}</span></pre> <p><span class="koboSpan" id="kobo.1195.1">Some</span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.1196.1"> browsers ignore MIME types and may still display files if their filename ends with a known extension, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1197.1">.html</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1198.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1199.1">.txt</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1200.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1201.1">To control the way files are handled by your visitors’ browsers in a more certain and definitive manner, you should make use of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1202.1">Content-Disposition</span></strong><span class="koboSpan" id="kobo.1203.1"> HTTP header via the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1204.1">add_header</span></strong><span class="koboSpan" id="kobo.1205.1"> directive, detailed in the </span><em class="italic"><span class="koboSpan" id="kobo.1206.1">HTTP headers</span></em><span class="koboSpan" id="kobo.1207.1"> module (</span><a href="B21787_04.xhtml#_idTextAnchor412"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1208.1">Chapter 4</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1209.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.1210.1">The default values, if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1211.1">mime.types</span></strong><span class="koboSpan" id="kobo.1212.1"> file is not included, are </span><span class="No-Break"><span class="koboSpan" id="kobo.1213.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1214.1">
types {</span><a id="_idTextAnchor276"/>
<a id="_idTextAnchor277"/><span class="koboSpan" id="kobo.1215.1">  text/html html;
  image/gif gif;
  image/jpeg jpg;
}</span></pre> <h3><span class="koboSpan" id="kobo.1216.1">default_type</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1217.1">Context</span></strong><span class="koboSpan" id="kobo.1218.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1219.1">http</span></strong><span class="koboSpan" id="kobo.1220.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1221.1">server</span></strong><span class="koboSpan" id="kobo.1222.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1223.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1224.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1225.1">Defines</span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.1226.1"> the default MIME type. </span><span class="koboSpan" id="kobo.1226.2">When NGINX serves a file, the file extension is matched against the known types declared within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1227.1">types</span></strong><span class="koboSpan" id="kobo.1228.1"> block in order to return the proper MIME type as a value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1229.1">Content-Type</span></strong><span class="koboSpan" id="kobo.1230.1"> HTTP response header. </span><span class="koboSpan" id="kobo.1230.2">If the extension doesn’t match any of the known MIME types, the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1231.1">default_type</span></strong><span class="koboSpan" id="kobo.1232.1"> dir</span><a id="_idTextAnchor278"/><span class="koboSpan" id="kobo.1233.1">e</span><a id="_idTextAnchor279"/><span class="koboSpan" id="kobo.1234.1">ctive </span><span class="No-Break"><span class="koboSpan" id="kobo.1235.1">is used.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1236.1">Syntax</span></strong><span class="koboSpan" id="kobo.1237.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1238.1">MIME type</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1239.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1240.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1241.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1242.1">text/plain</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1243.1">types_hash_max_size</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1244.1">Context</span></strong><span class="koboSpan" id="kobo.1245.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1246.1">http</span></strong><span class="koboSpan" id="kobo.1247.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1248.1">server</span></strong><span class="koboSpan" id="kobo.1249.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1250.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1251.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1252.1">Defines the </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.1253.1">maximum size of an entry in the MIME types’ </span><span class="No-Break"><span class="koboSpan" id="kobo.1254.1">hash tables.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1255.1">Syntax</span></strong><span class="koboSpan" id="kobo.1256.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1257.1">N</span><a id="_idTextAnchor280"/><span class="koboSpan" id="kobo.1258.1">u</span><a id="_idTextAnchor281"/><span class="koboSpan" id="kobo.1259.1">meric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1260.1">Default value</span></strong><span class="koboSpan" id="kobo.1261.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1262.1">4k</span></strong><span class="koboSpan" id="kobo.1263.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1264.1">8k</span></strong><span class="koboSpan" id="kobo.1265.1"> (one line of </span><span class="No-Break"><span class="koboSpan" id="kobo.1266.1">CPU cache)</span></span></p>
<h3><span class="koboSpan" id="kobo.1267.1">types_hash_bucket_size</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1268.1">Context</span></strong><span class="koboSpan" id="kobo.1269.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1270.1">http</span></strong><span class="koboSpan" id="kobo.1271.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1272.1">server</span></strong><span class="koboSpan" id="kobo.1273.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1274.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1275.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1276.1">Sets the bucket </span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.1277.1">size for the MIME types’ hash tables. </span><span class="koboSpan" id="kobo.1277.2">You should only change this value i</span><a id="_idTextAnchor282"/><span class="koboSpan" id="kobo.1278.1">f</span><a id="_idTextAnchor283"/><span class="koboSpan" id="kobo.1279.1"> NGINX tells </span><span class="No-Break"><span class="koboSpan" id="kobo.1280.1">you to.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1281.1">Syntax</span></strong><span class="koboSpan" id="kobo.1282.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1283.1">Numeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1284.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1285.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1286.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1287.1">64</span></strong></span></p>
<h2 id="_idParaDest-73"><a id="_idTextAnchor284"/><span class="koboSpan" id="kobo.1288.1">Limits and restrictions</span></h2>
<p><span class="koboSpan" id="kobo.1289.1">This</span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.1290.1"> set of </span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.1291.1">directives will allow you to add restrictions that apply when a client attempts to access a particular location or document on your server. </span><span class="koboSpan" id="kobo.1291.2">Note that you will find ad</span><a id="_idTextAnchor285"/><span class="koboSpan" id="kobo.1292.1">d</span><a id="_idTextAnchor286"/><span class="koboSpan" id="kobo.1293.1">itional directives for restricting access in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1294.1">next chapter.</span></span></p>
<h3><span class="koboSpan" id="kobo.1295.1">limit_except</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1296.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1297.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1298.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1299.1">This </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.1300.1">directive allows you to prevent the use of all HTTP methods, except ones that you explicitly allow. </span><span class="koboSpan" id="kobo.1300.2">Within a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1301.1">location</span></strong><span class="koboSpan" id="kobo.1302.1"> block, you may want to restrict the use of some HTTP methods, such as forbidding clients from sending </span><strong class="source-inline"><span class="koboSpan" id="kobo.1303.1">POST</span></strong><span class="koboSpan" id="kobo.1304.1"> requests. </span><span class="koboSpan" id="kobo.1304.2">You need to define two elements: first, methods that are not forbidden (allowed methods; all others will be forbidden); and second, the audience that is affected by </span><span class="No-Break"><span class="koboSpan" id="kobo.1305.1">the restriction:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1306.1">
location /admin/ {
    limit_except GET {
      allow 192.168.1.0/24;
      deny all;
    }
}</span></pre> <p><span class="koboSpan" id="kobo.1307.1">This</span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.1308.1"> example applies a restriction to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1309.1">/admin/</span></strong><span class="koboSpan" id="kobo.1310.1"> location—all visitors are only allowed to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1311.1">GET</span></strong><span class="koboSpan" id="kobo.1312.1"> method. </span><span class="koboSpan" id="kobo.1312.2">Visitors that have a local IP address, as specified with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1313.1">allow</span></strong><span class="koboSpan" id="kobo.1314.1"> directive (detailed in the HTTP access module), are not affected by this restriction. </span><span class="koboSpan" id="kobo.1314.2">If a visitor uses a forbidden method, NGINX will return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1315.1">403 Forbidden</span></strong><span class="koboSpan" id="kobo.1316.1"> HTTP error. </span><span class="koboSpan" id="kobo.1316.2">Note that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1317.1">GET</span></strong><span class="koboSpan" id="kobo.1318.1"> method implies the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1319.1">HEAD</span></strong><span class="koboSpan" id="kobo.1320.1"> method (if you allow </span><strong class="source-inline"><span class="koboSpan" id="kobo.1321.1">GET</span></strong><span class="koboSpan" id="kobo.1322.1">, both </span><strong class="source-inline"><span class="koboSpan" id="kobo.1323.1">GET</span></strong><span class="koboSpan" id="kobo.1324.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1325.1">HEAD</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1326.1">are allowed).</span></span></p>
<p><span class="koboSpan" id="kobo.1327.1">The syntax </span><span class="No-Break"><span class="koboSpan" id="kobo.1328.1">is specific:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1329.1">
limit_except METHOD1 [METHOD2...] {
  allow | deny | auth_basic | auth_basic_user_file | proxy_pass | perl;
}</span></pre> <p><span class="koboSpan" id="kobo.1330.1">Directives that you are allowed to insert within the block are documented in th</span><a id="_idTextAnchor287"/><span class="koboSpan" id="kobo.1331.1">e</span><a id="_idTextAnchor288"/><span class="koboSpan" id="kobo.1332.1">ir respective module section in </span><a href="B21787_04.xhtml#_idTextAnchor412"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1333.1">Chapter 4</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1334.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.1335.1">limit_rate</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1336.1">Context</span></strong><span class="koboSpan" id="kobo.1337.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1338.1">http</span></strong><span class="koboSpan" id="kobo.1339.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1340.1">server</span></strong><span class="koboSpan" id="kobo.1341.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1342.1">location</span></strong><span class="koboSpan" id="kobo.1343.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1345.1">if</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1346.1">Allows </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.1347.1">you to limit the transfer rate of individual client connections. </span><span class="koboSpan" id="kobo.1347.2">The rate is expressed in bytes </span><span class="No-Break"><span class="koboSpan" id="kobo.1348.1">per second:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1349.1">
limit_rate 500k;</span></pre> <p><span class="koboSpan" id="kobo.1350.1">This will limit connection transfer rates to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1351.1">500</span></strong><span class="koboSpan" id="kobo.1352.1"> kilobytes per second. </span><span class="koboSpan" id="kobo.1352.2">If a client opens two connections, the client will be a</span><a id="_idTextAnchor289"/><span class="koboSpan" id="kobo.1353.1">l</span><a id="_idTextAnchor290"/><span class="koboSpan" id="kobo.1354.1">lowed </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1355.1">2*500</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1356.1"> kilobytes.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1357.1">Syntax</span></strong><span class="koboSpan" id="kobo.1358.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1359.1">Size value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1360.1">Default value</span></strong><span class="koboSpan" id="kobo.1361.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1362.1">No limit</span></span></p>
<h3><span class="koboSpan" id="kobo.1363.1">limit_rate_after</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1364.1">Context</span></strong><span class="koboSpan" id="kobo.1365.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1366.1">http</span></strong><span class="koboSpan" id="kobo.1367.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1368.1">server</span></strong><span class="koboSpan" id="kobo.1369.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1370.1">location</span></strong><span class="koboSpan" id="kobo.1371.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1372.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1373.1">if</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1374.1">Defines</span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.1375.1"> the number of data transferred before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1376.1">limit_rate</span></strong><span class="koboSpan" id="kobo.1377.1"> directive </span><span class="No-Break"><span class="koboSpan" id="kobo.1378.1">takes effect:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1379.1">
limit_rate 10m;</span></pre> <p><span class="koboSpan" id="kobo.1380.1">NGINX will</span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.1381.1"> send the first 10 megabytes at maximum speed. </span><span class="koboSpan" id="kobo.1381.2">Past this size, the transfer rate is limited by the value specified with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1382.1">limit_rate</span></strong><span class="koboSpan" id="kobo.1383.1"> directive (see the previous entry). </span><span class="koboSpan" id="kobo.1383.2">Similar to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1384.1">limit_rate</span></strong><span class="koboSpan" id="kobo.1385.1"> directive, this setting o</span><a id="_idTextAnchor291"/><span class="koboSpan" id="kobo.1386.1">n</span><a id="_idTextAnchor292"/><span class="koboSpan" id="kobo.1387.1">ly applies to a </span><span class="No-Break"><span class="koboSpan" id="kobo.1388.1">single connection.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1389.1">Syntax</span></strong><span class="koboSpan" id="kobo.1390.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1391.1">Size value</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1392.1">Default</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1393.1">: None</span></span></p>
<h3><span class="koboSpan" id="kobo.1394.1">satisfy</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1395.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1396.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1397.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1398.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1399.1">satisfy</span></strong><span class="koboSpan" id="kobo.1400.1"> directive</span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.1401.1"> defines whether clients require all access conditions to be valid (satisfy all), or at least one (</span><span class="No-Break"><span class="koboSpan" id="kobo.1402.1">satisfy any):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1403.1">
location /admin/ {
    allow 192.168.1.0/24;
    deny all;
    auth_basic "Authentication required";
    auth_basic_user_file conf/htpasswd;
}</span></pre> <p><span class="koboSpan" id="kobo.1404.1">In the previous example, there are two conditions for clients to be able to access </span><span class="No-Break"><span class="koboSpan" id="kobo.1405.1">the resource:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1406.1">Through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1407.1">allow</span></strong><span class="koboSpan" id="kobo.1408.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1409.1">deny</span></strong><span class="koboSpan" id="kobo.1410.1"> directives (HTTP access module), we only allow clients that have a local IP address; all other clients are </span><span class="No-Break"><span class="koboSpan" id="kobo.1411.1">denied access</span></span></li>
<li><span class="koboSpan" id="kobo.1412.1">Through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1413.1">auth_basic</span></strong><span class="koboSpan" id="kobo.1414.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1415.1">auth_basic_user_file</span></strong><span class="koboSpan" id="kobo.1416.1"> directives (the HTTP </span><strong class="source-inline"><span class="koboSpan" id="kobo.1417.1">auth_basic</span></strong><span class="koboSpan" id="kobo.1418.1"> module), we only allow clients that provide a valid username </span><span class="No-Break"><span class="koboSpan" id="kobo.1419.1">and password</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1420.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.1421.1">satisfy all</span></strong><span class="koboSpan" id="kobo.1422.1">, the client must satisfy both conditions in order to gain access to the resource. </span><span class="koboSpan" id="kobo.1422.2">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.1423.1">satisfy any</span></strong><span class="koboSpan" id="kobo.1424.1">, if the client satisfies either condition, </span><a id="_idTextAnchor293"/><span class="koboSpan" id="kobo.1425.1">t</span><a id="_idTextAnchor294"/><span class="koboSpan" id="kobo.1426.1">hey are </span><span class="No-Break"><span class="koboSpan" id="kobo.1427.1">granted access.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1428.1">Syntax</span></strong><span class="koboSpan" id="kobo.1429.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1430.1">satisfy any | </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1431.1">all</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1432.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1433.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1434.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1435.1">all</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1436.1">internal</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1437.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1438.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1439.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1440.1">This directive</span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.1441.1"> specifies that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1442.1">location</span></strong><span class="koboSpan" id="kobo.1443.1"> block is internal. </span><span class="koboSpan" id="kobo.1443.2">In other words, the specified resource cannot be accessed by </span><span class="No-Break"><span class="koboSpan" id="kobo.1444.1">external requests:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1445.1">
server {
    [...]
    server_name .website.com;
    location /admin/ {
        internal;
    }
}</span></pre> <p><span class="koboSpan" id="kobo.1446.1">With the previous configuration, clients will not be able to browse </span><strong class="source-inline"><span class="koboSpan" id="kobo.1447.1">http://website.com/admin/</span></strong><span class="koboSpan" id="kobo.1448.1">. </span><span class="koboSpan" id="kobo.1448.2">Such requests will be met with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1449.1">404 Not Found</span></strong><span class="koboSpan" id="kobo.1450.1"> e</span><a id="_idTextAnchor295"/><a id="_idTextAnchor296"/><span class="koboSpan" id="kobo.1451.1">rrors. </span><span class="koboSpan" id="kobo.1451.2">The only way to access the resource is via </span><span class="No-Break"><span class="koboSpan" id="kobo.1452.1">internal redirects.</span></span></p>
<h2 id="_idParaDest-74"><a id="_idTextAnchor297"/><span class="koboSpan" id="kobo.1453.1">File processing and caching</span></h2>
<p><span class="koboSpan" id="kobo.1454.1">It’s</span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.1455.1"> important for your websites to be </span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.1456.1">built upon solid foundations. </span><span class="koboSpan" id="kobo.1456.2">File access and caching are critical aspects of web serving. </span><span class="koboSpan" id="kobo.1456.3">In this regard, NGINX let</span><a id="_idTextAnchor298"/><span class="koboSpan" id="kobo.1457.1">s</span><a id="_idTextAnchor299"/><span class="koboSpan" id="kobo.1458.1"> you perform precise tweaking with the use of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1459.1">following directives.</span></span></p>
<h3><span class="koboSpan" id="kobo.1460.1">disable_symlinks</span></h3>
<p><span class="koboSpan" id="kobo.1461.1">This </span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.1462.1">directive allows you to control the way NGINX handles symbolic links when they are to be served. </span><span class="koboSpan" id="kobo.1462.2">By default (the directive value is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1463.1">off</span></strong><span class="koboSpan" id="kobo.1464.1">), symbolic links are allowed, and NGINX follows them. </span><span class="koboSpan" id="kobo.1464.2">You may decide to disable the following symbolic links under different conditions by specifying one of </span><span class="No-Break"><span class="koboSpan" id="kobo.1465.1">these values:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1466.1">on</span></strong><span class="koboSpan" id="kobo.1467.1">: If any part of the requested URI is a symbolic link, access to it is denied, and NGINX returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1468.1">403 HTTP</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1469.1">error page.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1470.1">if_not_owner</span></strong><span class="koboSpan" id="kobo.1471.1">: Similar to the previous link, but access is denied only if the link and the object it points to have </span><span class="No-Break"><span class="koboSpan" id="kobo.1472.1">different owners.</span></span></li>
<li><span class="koboSpan" id="kobo.1473.1">The </span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.1474.1">optional </span><strong class="source-inline"><span class="koboSpan" id="kobo.1475.1">from=</span></strong><span class="koboSpan" id="kobo.1476.1"> parameter allows you to specify a part of the URL that will not be checked for symbolic links. </span><span class="koboSpan" id="kobo.1476.2">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1477.1">disable_symlinks on from=$document_root</span></strong><span class="koboSpan" id="kobo.1478.1"> will tell NGINX to normally follow symbolic links in the URI up to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1479.1">$document_root</span></strong><span class="koboSpan" id="kobo.1480.1"> folder. </span><span class="koboSpan" id="kobo.1480.2">If a symbolic link is found</span><a id="_idTextAnchor300"/> <a id="_idTextAnchor301"/><span class="koboSpan" id="kobo.1481.1">in the URI parts after that, access to the requested file will </span><span class="No-Break"><span class="koboSpan" id="kobo.1482.1">be denied.</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.1483.1">directio</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1484.1">Context</span></strong><span class="koboSpan" id="kobo.1485.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1486.1">http</span></strong><span class="koboSpan" id="kobo.1487.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1488.1">server</span></strong><span class="koboSpan" id="kobo.1489.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1490.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1491.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1492.1">If this directive</span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.1493.1"> is enabled, files with a size greater than the specified value will be read with the Direct I/O system mechanism. </span><span class="koboSpan" id="kobo.1493.2">This allows NGINX to read data from the storage device and place it directly in memory with no intermedia</span><a id="_idTextAnchor302"/><a id="_idTextAnchor303"/><span class="koboSpan" id="kobo.1494.1">ry caching </span><span class="No-Break"><span class="koboSpan" id="kobo.1495.1">process involved.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1496.1">Syntax</span></strong><span class="koboSpan" id="kobo.1497.1">: Size value, </span><span class="No-Break"><span class="koboSpan" id="kobo.1498.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1499.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1500.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1501.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1502.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1503.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1504.1">directio_alignment</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1505.1">Context</span></strong><span class="koboSpan" id="kobo.1506.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1507.1">http</span></strong><span class="koboSpan" id="kobo.1508.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1509.1">server</span></strong><span class="koboSpan" id="kobo.1510.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1511.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1512.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1513.1">Sets byte </span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.1514.1">alignment when using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1515.1">directio</span></strong><span class="koboSpan" id="kobo.1516.1">. </span><span class="koboSpan" id="kobo.1516.2">Set this v</span><a id="_idTextAnchor304"/><span class="koboSpan" id="kobo.1517.1">a</span><a id="_idTextAnchor305"/><span class="koboSpan" id="kobo.1518.1">lue to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1519.1">4k</span></strong><span class="koboSpan" id="kobo.1520.1"> if you use XFS </span><span class="No-Break"><span class="koboSpan" id="kobo.1521.1">under Linux.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1522.1">Syntax</span></strong><span class="koboSpan" id="kobo.1523.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1524.1">Size value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1525.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1526.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1527.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1528.1">512</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1529.1">open_file_cache</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1530.1">Context</span></strong><span class="koboSpan" id="kobo.1531.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1532.1">http</span></strong><span class="koboSpan" id="kobo.1533.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1534.1">server</span></strong><span class="koboSpan" id="kobo.1535.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1536.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1537.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1538.1">This </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.1539.1">directive allows you to enable the cache that stores information about open files. </span><span class="koboSpan" id="kobo.1539.2">It does not actually store file contents but only information such as </span><span class="No-Break"><span class="koboSpan" id="kobo.1540.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1541.1">File descriptors (file size, modification time, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1542.1">so on).</span></span></li>
<li><span class="koboSpan" id="kobo.1543.1">The existence of files </span><span class="No-Break"><span class="koboSpan" id="kobo.1544.1">and directories.</span></span></li>
<li><span class="koboSpan" id="kobo.1545.1">File errors, such as permission denied, file not found, and so on. </span><span class="koboSpan" id="kobo.1545.2">Note that this can be disabled with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1546.1">open_file_cache_errors</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1547.1"> directive.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1548.1">This directive accepts </span><span class="No-Break"><span class="koboSpan" id="kobo.1549.1">two arguments:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1550.1">max=X</span></strong><span class="koboSpan" id="kobo.1551.1">, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.1552.1">X</span></strong><span class="koboSpan" id="kobo.1553.1"> is the number of entries that the cache can store. </span><span class="koboSpan" id="kobo.1553.2">If this number is reached, older entries will be deleted in order to leave room for </span><span class="No-Break"><span class="koboSpan" id="kobo.1554.1">newer entries.</span></span></li>
<li><span class="koboSpan" id="kobo.1555.1">Optionally, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1556.1">inactive=Y</span></strong><span class="koboSpan" id="kobo.1557.1">, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.1558.1">Y</span></strong><span class="koboSpan" id="kobo.1559.1"> is the of seconds that a cache entry should be stored. </span><span class="koboSpan" id="kobo.1559.2">By default, NGINX will wait </span><em class="italic"><span class="koboSpan" id="kobo.1560.1">60</span></em><span class="koboSpan" id="kobo.1561.1"> seconds before clearing a cache entry. </span><span class="koboSpan" id="kobo.1561.2">If the cache entry is accessed, the timer is reset. </span><span class="koboSpan" id="kobo.1561.3">If the cache entry is accessed more than the value defined by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1562.1">open_file_cache_min_uses</span></strong><span class="koboSpan" id="kobo.1563.1">, the cache entry will not be cleared (until NGINX runs out of space and decides to clear out </span><span class="No-Break"><span class="koboSpan" id="kobo.1564.1">older entries).</span></span></li>
</ul>
<p><strong class="bold"><span class="koboSpan" id="kobo.1565.1">Syntax</span></strong><span class="koboSpan" id="kobo.1566.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1567.1">open_file_cache max=X [inactive=</span><a id="_idTextAnchor306"/><a id="_idTextAnchor307"/><span class="koboSpan" id="kobo.1568.1">Y] | </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1569.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1570.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1571.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1572.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1573.1">off</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1574.1">Example</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1575.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1576.1">
open_file_cache max=5000 inactive=180;</span></pre> <h3><span class="koboSpan" id="kobo.1577.1">open_file_cache_errors</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1578.1">Context</span></strong><span class="koboSpan" id="kobo.1579.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1580.1">http</span></strong><span class="koboSpan" id="kobo.1581.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1582.1">server</span></strong><span class="koboSpan" id="kobo.1583.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1584.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1585.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1586.1">Enables </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.1587.1">or disables the caching of file errors with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1588.1">open_file_c</span><a id="_idTextAnchor308"/><span class="koboSpan" id="kobo.1589.1">a</span><a id="_idTextAnchor309"/><span class="koboSpan" id="kobo.1590.1">che</span></strong><span class="koboSpan" id="kobo.1591.1"> directive (read the </span><span class="No-Break"><span class="koboSpan" id="kobo.1592.1">previous entry).</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1593.1">Syntax</span></strong><span class="koboSpan" id="kobo.1594.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1595.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1596.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1597.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1598.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1599.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1600.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1601.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1602.1">open_file_cache_min_uses</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1603.1">Context</span></strong><span class="koboSpan" id="kobo.1604.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1605.1">http</span></strong><span class="koboSpan" id="kobo.1606.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1607.1">server</span></strong><span class="koboSpan" id="kobo.1608.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1609.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1610.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1611.1">By </span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.1612.1">default, entries in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1613.1">open_file_cache</span></strong><span class="koboSpan" id="kobo.1614.1"> directive are cleared after a period of inactivity (60 seconds, by default). </span><span class="koboSpan" id="kobo.1614.2">If there is activity, though, you can prevent NGINX from removing the cache entry. </span><span class="koboSpan" id="kobo.1614.3">This directive defines the number of times an entry must be accessed in order to be eligible </span><span class="No-Break"><span class="koboSpan" id="kobo.1615.1">for protection:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1616.1">
open_file_cache_min_uses 3;</span></pre> <p><span class="koboSpan" id="kobo.1617.1">If the cache entry is accessed more than three times, it becomes permanently active and is not removed until NGINX decides to clear </span><a id="_idTextAnchor310"/><span class="koboSpan" id="kobo.1618.1">o</span><a id="_idTextAnchor311"/><span class="koboSpan" id="kobo.1619.1">ut older entries to free up </span><span class="No-Break"><span class="koboSpan" id="kobo.1620.1">some space.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1621.1">Syntax</span></strong><span class="koboSpan" id="kobo.1622.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1623.1">Numeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1624.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1625.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1626.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1627.1">1</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1628.1">open_file_cache_valid</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1629.1">Context</span></strong><span class="koboSpan" id="kobo.1630.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1631.1">http</span></strong><span class="koboSpan" id="kobo.1632.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1633.1">server</span></strong><span class="koboSpan" id="kobo.1634.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1635.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1636.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1637.1">The </span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.1638.1">open file cache mechanism is important, but cached information quickly becomes obsolete, especially in the case of a fast-moving filesystem. </span><span class="koboSpan" id="kobo.1638.2">In that regard, information needs to be re-verified after a short period of time. </span><span class="koboSpan" id="kobo.1638.3">This directive specifies the number of seconds that NGINX will wait befor</span><a id="_idTextAnchor312"/><a id="_idTextAnchor313"/><span class="koboSpan" id="kobo.1639.1">e revalidating a </span><span class="No-Break"><span class="koboSpan" id="kobo.1640.1">cache entry.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1641.1">Syntax</span></strong><span class="koboSpan" id="kobo.1642.1">: Time value (</span><span class="No-Break"><span class="koboSpan" id="kobo.1643.1">in seconds)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1644.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1645.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1646.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1647.1">60</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1648.1">read_ahead</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1649.1">Context</span></strong><span class="koboSpan" id="kobo.1650.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1651.1">http</span></strong><span class="koboSpan" id="kobo.1652.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1653.1">server</span></strong><span class="koboSpan" id="kobo.1654.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1655.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1656.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1657.1">Defines</span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.1658.1"> the number of bytes to pre-read from files. </span><span class="koboSpan" id="kobo.1658.2">Under Linux-based operating systems, setting this directive to a value above </span><strong class="source-inline"><span class="koboSpan" id="kobo.1659.1">0</span></strong><span class="koboSpan" id="kobo.1660.1"> will enable reading ahead, but the actual value you specify has no </span><a id="_idTextAnchor314"/><span class="koboSpan" id="kobo.1661.1">e</span><a id="_idTextAnchor315"/><span class="koboSpan" id="kobo.1662.1">ffect. </span><span class="koboSpan" id="kobo.1662.2">Set this to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1663.1">0</span></strong><span class="koboSpan" id="kobo.1664.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.1665.1">disable</span></span><span class="No-Break"><a id="_idIndexMarker194"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1666.1"> pre-reading.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1667.1">Syntax</span></strong><span class="koboSpan" id="kobo.1668.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1669.1">Size value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1670.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1671.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1672.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1673.1">0</span></strong></span></p>
<h2 id="_idParaDest-75"><a id="_idTextAnchor316"/><span class="koboSpan" id="kobo.1674.1">Other directives</span></h2>
<p><span class="koboSpan" id="kobo.1675.1">The following directives</span><a id="_idTextAnchor317"/> <a id="_idTextAnchor318"/><span class="koboSpan" id="kobo.1676.1">relate to various aspects of web server logging, URI composition, DNS, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1677.1">so on.</span></span></p>
<h3><span class="koboSpan" id="kobo.1678.1">log_not_found</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1679.1">Context</span></strong><span class="koboSpan" id="kobo.1680.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1681.1">http</span></strong><span class="koboSpan" id="kobo.1682.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1683.1">server</span></strong><span class="koboSpan" id="kobo.1684.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1685.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1686.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1687.1">Enables or disables </span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.1688.1">logging of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1689.1">404 Not Found</span></strong><span class="koboSpan" id="kobo.1690.1"> HTTP errors. </span><span class="koboSpan" id="kobo.1690.2">If your logs get filled with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1691.1">404</span></strong><span class="koboSpan" id="kobo.1692.1"> errors due to missing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1693.1">favicon.ico</span></strong><span class="koboSpan" id="kobo.1694.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1695.1">rob</span><a id="_idTextAnchor319"/><span class="koboSpan" id="kobo.1696.1">o</span><a id="_idTextAnchor320"/><span class="koboSpan" id="kobo.1697.1">ts.txt</span></strong><span class="koboSpan" id="kobo.1698.1"> files, you might want to turn </span><span class="No-Break"><span class="koboSpan" id="kobo.1699.1">this off.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1700.1">Syntax</span></strong><span class="koboSpan" id="kobo.1701.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1702.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1703.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1704.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1705.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1706.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1707.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1708.1">on</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1709.1">log_subrequest</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1710.1">Context</span></strong><span class="koboSpan" id="kobo.1711.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1712.1">http</span></strong><span class="koboSpan" id="kobo.1713.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1714.1">server</span></strong><span class="koboSpan" id="kobo.1715.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1716.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1717.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1718.1">Enables or disables logging of</span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.1719.1"> sub-requests triggered by internal re</span><a id="_idTextAnchor321"/><span class="koboSpan" id="kobo.1720.1">d</span><a id="_idTextAnchor322"/><span class="koboSpan" id="kobo.1721.1">irects or </span><strong class="bold"><span class="koboSpan" id="kobo.1722.1">server-side includes</span></strong><span class="koboSpan" id="kobo.1723.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1724.1">SSI</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1725.1">) requests.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1726.1">Syntax</span></strong><span class="koboSpan" id="kobo.1727.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1728.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1729.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1730.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1731.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1732.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1733.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1734.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1735.1">merge_slashes</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1736.1">Context</span></strong><span class="koboSpan" id="kobo.1737.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1738.1">http</span></strong><span class="koboSpan" id="kobo.1739.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1740.1">server</span></strong><span class="koboSpan" id="kobo.1741.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1742.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1743.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1744.1">Enabling this</span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.1745.1"> directive will have the effect of merging multiple consecutive slashes in a URI. </span><span class="koboSpan" id="kobo.1745.2">It turns out to be particularly useful in situations resembling </span><span class="No-Break"><span class="koboSpan" id="kobo.1746.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1747.1">
server {
    [...]
    server_name website.com;
    location /documents/ {
        type { }
        default_type text/plain;
   }
}</span></pre> <p><span class="koboSpan" id="kobo.1748.1">By default, if the </span><a id="_idIndexMarker198"/><span class="koboSpan" id="kobo.1749.1">client attempts to access </span><strong class="source-inline"><span class="koboSpan" id="kobo.1750.1">http://website.com//documents/</span></strong><span class="koboSpan" id="kobo.1751.1"> (note </span><strong class="source-inline"><span class="koboSpan" id="kobo.1752.1">//</span></strong><span class="koboSpan" id="kobo.1753.1"> in the middle of the URI), NGINX will return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1754.1">404 Not Found</span></strong><span class="koboSpan" id="kobo.1755.1"> HTTP error. </span><span class="koboSpan" id="kobo.1755.2">If you enable this directive, the two slashes will be merged in</span><a id="_idTextAnchor323"/><span class="koboSpan" id="kobo.1756.1">t</span><a id="_idTextAnchor324"/><span class="koboSpan" id="kobo.1757.1">o one, and the location pattern will </span><span class="No-Break"><span class="koboSpan" id="kobo.1758.1">be matched.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1759.1">Syntax</span></strong><span class="koboSpan" id="kobo.1760.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1761.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1762.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1763.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1764.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1765.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1766.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1767.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1768.1">msie_padding</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1769.1">Context</span></strong><span class="koboSpan" id="kobo.1770.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1771.1">http</span></strong><span class="koboSpan" id="kobo.1772.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1773.1">server</span></strong><span class="koboSpan" id="kobo.1774.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1775.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1776.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1777.1">This directive </span><a id="_idIndexMarker199"/><span class="koboSpan" id="kobo.1778.1">functions with the </span><strong class="bold"><span class="koboSpan" id="kobo.1779.1">Microsoft Internet Explorer</span></strong><span class="koboSpan" id="kobo.1780.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1781.1">MSIE</span></strong><span class="koboSpan" id="kobo.1782.1">) and Google Chrome browser families. </span><span class="koboSpan" id="kobo.1782.2">In the case of error </span><a id="_idIndexMarker200"/><span class="koboSpan" id="kobo.1783.1">pages (with error code </span><strong class="source-inline"><span class="koboSpan" id="kobo.1784.1">400</span></strong><span class="koboSpan" id="kobo.1785.1"> or higher), if the length of the response body is less than 512 bytes, these browsers will display their own error page, sometimes at the expense of a more informative page provided by the server. </span><span class="koboSpan" id="kobo.1785.2">If you enable this option, the body of responses with a status</span><a id="_idTextAnchor325"/> <a id="_idTextAnchor326"/><span class="koboSpan" id="kobo.1786.1">code of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1787.1">400</span></strong><span class="koboSpan" id="kobo.1788.1"> or higher will be padded to </span><span class="No-Break"><span class="koboSpan" id="kobo.1789.1">512 bytes.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1790.1">Syntax</span></strong><span class="koboSpan" id="kobo.1791.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1792.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1793.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1794.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1795.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1796.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1797.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1798.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1799.1">msie_refresh</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1800.1">Context</span></strong><span class="koboSpan" id="kobo.1801.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1802.1">http</span></strong><span class="koboSpan" id="kobo.1803.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1804.1">server</span></strong><span class="koboSpan" id="kobo.1805.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1806.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1807.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1808.1">This is </span><a id="_idIndexMarker201"/><span class="koboSpan" id="kobo.1809.1">another MSIE-specific directive that will take effect in the case of the following HTTP response codes, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1810.1">301 Moved Permanently</span></strong><span class="koboSpan" id="kobo.1811.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1812.1">302 Moved Temporarily</span></strong><span class="koboSpan" id="kobo.1813.1">. </span><span class="koboSpan" id="kobo.1813.2">When enabled, NGINX sends clients running an MSIE browser a response body containing a refresh meta tag (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1814.1">&lt;meta http-equiv="Refresh"...&gt;</span></strong><span class="koboSpan" id="kobo.1815.1">) in order to redirect the br</span><a id="_idTextAnchor327"/><span class="koboSpan" id="kobo.1816.1">o</span><a id="_idTextAnchor328"/><span class="koboSpan" id="kobo.1817.1">wser to the new location of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1818.1">requested resource.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1819.1">Syntax</span></strong><span class="koboSpan" id="kobo.1820.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1821.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1822.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1823.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1824.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1825.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1826.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1827.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1828.1">resolver</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1829.1">Context</span></strong><span class="koboSpan" id="kobo.1830.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1831.1">http</span></strong><span class="koboSpan" id="kobo.1832.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1833.1">server</span></strong><span class="koboSpan" id="kobo.1834.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1835.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1836.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1837.1">Specifies </span><a id="_idIndexMarker202"/><span class="koboSpan" id="kobo.1838.1">the name servers that should be employed by NGINX to resolve hostnames to IP addresses and vice versa. </span><span class="koboSpan" id="kobo.1838.2">DNS query results are cached for some time, either by </span><a id="_idIndexMarker203"/><span class="koboSpan" id="kobo.1839.1">respecting the </span><strong class="bold"><span class="koboSpan" id="kobo.1840.1">time to live</span></strong><span class="koboSpan" id="kobo.1841.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1842.1">TTL</span></strong><span class="koboSpan" id="kobo.1843.1">) provided by the DNS server or by specifying a time value to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1844.1">valid argument.</span></span></p>
<p><span class="koboSpan" id="kobo.1845.1">If more than one DNS server is specified, NGINX will query them using a </span><span class="No-Break"><span class="koboSpan" id="kobo.1846.1">round-robin algorithm.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1847.1">Syntax</span></strong><span class="koboSpan" id="kobo.1848.1">: One or more IPv4 or IPv6 addresses, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1849.1">valid=Time </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1850.1">value, ipv6=on|off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1851.1">Default value</span></strong><span class="koboSpan" id="kobo.1852.1">: None (</span><span class="No-Break"><span class="koboSpan" id="kobo.1853.1">system default)</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1854.1">Examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1855.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1856.1">
resolver 127.0.0.1; #use local DNS
resolver 8.8.8.8 8.8.4.4 valid=1h;#GoogleDNS &amp; 1 hour cache</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.1857.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1858.1">Although NGINX supports external DNS resolvers, we strongly recommend you use a local resolver such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1859.1">dnsmasq</span></strong><span class="koboSpan" id="kobo.1860.1"> and have NGINX query </span><strong class="source-inline"><span class="koboSpan" id="kobo.1861.1">dnsmasq</span></strong><span class="koboSpan" id="kobo.1862.1"> instead. </span><span class="koboSpan" id="kobo.1862.2">NGINX might struggle to work with external resolvers under heavy load, and having a local resolver removes any network issue such as latency between NGINX and the DNS server. </span><span class="koboSpan" id="kobo.1862.3">By doing so, you can optimize </span><strong class="source-inline"><span class="koboSpan" id="kobo.1863.1">dnsmasq</span></strong><span class="koboSpan" id="kobo.1864.1"> or use an alternative such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1865.1">dnscrypt</span></strong><span class="koboSpan" id="kobo.1866.1"> to keep your DNS re</span><a id="_idTextAnchor329"/><span class="koboSpan" id="kobo.1867.1">quests private. </span><span class="koboSpan" id="kobo.1867.2">Once set, a local DNS server can be used for any other </span><span class="No-Break"><span class="koboSpan" id="kobo.1868.1">server application.</span></span></p>
<h3><span class="koboSpan" id="kobo.1869.1">resolver_timeout</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1870.1">Context</span></strong><span class="koboSpan" id="kobo.1871.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1872.1">http</span></strong><span class="koboSpan" id="kobo.1873.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1874.1">server</span></strong><span class="koboSpan" id="kobo.1875.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1876.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1877.1">location</span></strong></span><strong class="source-inline"><a id="_idTextAnchor330"/></strong></p>
<p><a id="_idTextAnchor331"/><span class="koboSpan" id="kobo.1878.1">Timeout for a </span><a id="_idIndexMarker204"/><span class="koboSpan" id="kobo.1879.1">hostname </span><span class="No-Break"><span class="koboSpan" id="kobo.1880.1">resolution query.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1881.1">Syntax</span></strong><span class="koboSpan" id="kobo.1882.1">: Time value (</span><span class="No-Break"><span class="koboSpan" id="kobo.1883.1">in seconds)</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1884.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1885.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1886.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1887.1">30</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1888.1">server_tokens</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1889.1">Context</span></strong><span class="koboSpan" id="kobo.1890.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1891.1">http</span></strong><span class="koboSpan" id="kobo.1892.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1893.1">server</span></strong><span class="koboSpan" id="kobo.1894.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1895.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1896.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1897.1">This directive </span><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.1898.1">allows you to define whether or not NGINX should inform clients of the running version number. </span><span class="koboSpan" id="kobo.1898.2">There are three situations where NGINX indicates its </span><span class="No-Break"><span class="koboSpan" id="kobo.1899.1">version number:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1900.1">In the server header of HTTP responses (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1901.1">nginx/1.25.0</span></strong><span class="koboSpan" id="kobo.1902.1">). </span><span class="koboSpan" id="kobo.1902.2">If you set </span><strong class="source-inline"><span class="koboSpan" id="kobo.1903.1">server_tokens</span></strong><span class="koboSpan" id="kobo.1904.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1905.1">off</span></strong><span class="koboSpan" id="kobo.1906.1">, the server header will only </span><span class="No-Break"><span class="koboSpan" id="kobo.1907.1">indicate </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1908.1">Nginx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1909.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1910.1">On error pages, NGINX indicates the version number in the footer. </span><span class="koboSpan" id="kobo.1910.2">If you set </span><strong class="source-inline"><span class="koboSpan" id="kobo.1911.1">server_tokens</span></strong><span class="koboSpan" id="kobo.1912.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1913.1">off</span></strong><span class="koboSpan" id="kobo.1914.1">, the footer on error pages will only </span><span class="No-Break"><span class="koboSpan" id="kobo.1915.1">indicate </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1916.1">Nginx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1917.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1918.1">If using the build value, NGINX will output the build value specified </span><span class="No-Break"><span class="koboSpan" id="kobo.1919.1">during compilation.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1920.1">If you are running an older version of NGINX and do not plan to update it, it might be a good idea t</span><a id="_idTextAnchor332"/><span class="koboSpan" id="kobo.1921.1">o </span><a id="_idTextAnchor333"/><em class="italic"><span class="koboSpan" id="kobo.1922.1">hide</span></em><span class="koboSpan" id="kobo.1923.1"> your version number for </span><span class="No-Break"><span class="koboSpan" id="kobo.1924.1">security reasons.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1925.1">Syntax</span></strong><span class="koboSpan" id="kobo.1926.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1927.1">on</span></strong><span class="koboSpan" id="kobo.1928.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1929.1">off</span></strong><span class="koboSpan" id="kobo.1930.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1931.1">build</span></strong><span class="koboSpan" id="kobo.1932.1">. </span><span class="koboSpan" id="kobo.1932.2">Default </span><span class="No-Break"><span class="koboSpan" id="kobo.1933.1">value: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1934.1">on</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1935.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.1936.1">underscores_in_headers</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1937.1">Context</span></strong><span class="koboSpan" id="kobo.1938.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1939.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1940.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1941.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1942.1">Allows or </span><a id="_idIndexMarker206"/><span class="koboSpan" id="kobo.1943.1">disallows underscores in custom HTTP header names. </span><span class="koboSpan" id="kobo.1943.2">If this directive is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1944.1">on</span></strong><span class="koboSpan" id="kobo.1945.1">, the following example</span><a id="_idTextAnchor334"/> <a id="_idTextAnchor335"/><span class="koboSpan" id="kobo.1946.1">header is considered valid by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1947.1">Nginx: </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1948.1">test_header: value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1949.1">:</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1950.1">Syntax</span></strong><span class="koboSpan" id="kobo.1951.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1952.1">on</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1953.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1954.1">off</span></strong></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1955.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1956.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1957.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1958.1">off</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1959.1">variables_hash_max_size</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1960.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1961.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1962.1">http</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1963.1">This directive defines the maximum size of variable hash tables. </span><span class="koboSpan" id="kobo.1963.2">If your server configuration</span><a id="_idIndexMarker207"/><span class="koboSpan" id="kobo.1964.1"> uses a total of more than 1</span><a id="_idTextAnchor336"/><span class="koboSpan" id="kobo.1965.1">,</span><a id="_idTextAnchor337"/><span class="koboSpan" id="kobo.1966.1">024 variables, you will have to increase </span><span class="No-Break"><span class="koboSpan" id="kobo.1967.1">this value.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1968.1">Syntax</span></strong><span class="koboSpan" id="kobo.1969.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.1970.1">Numeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1971.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1972.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1973.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1974.1">1024</span></strong></span></p>
<h3><span class="koboSpan" id="kobo.1975.1">variables_hash_bucket_size</span></h3>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1976.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1977.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1978.1">http</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1979.1">This directive allows </span><a id="_idIndexMarker208"/><span class="koboSpan" id="kobo.1980.1">you to set the bucket size for variable </span><span class="No-Break"><span class="koboSpan" id="kobo.1981.1">hash tables.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1982.1">Syntax</span></strong><span class="koboSpan" id="kobo.1983.1">: </span><a id="_idTextAnchor338"/><span class="No-Break"><span class="koboSpan" id="kobo.1984.1">N</span><a id="_idTextAnchor339"/><span class="koboSpan" id="kobo.1985.1">umeric value</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.1986.1">Default value</span></strong><span class="koboSpan" id="kobo.1987.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1988.1">64</span></strong><span class="koboSpan" id="kobo.1989.1"> (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1990.1">32</span></strong><span class="koboSpan" id="kobo.1991.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1992.1">128</span></strong><span class="koboSpan" id="kobo.1993.1">, depending on your processor </span><span class="No-Break"><span class="koboSpan" id="kobo.1994.1">cache specifications)</span></span></p>
<h3><span class="koboSpan" id="kobo.1995.1">post_action</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1996.1">Context</span></strong><span class="koboSpan" id="kobo.1997.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1998.1">http</span></strong><span class="koboSpan" id="kobo.1999.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2000.1">server</span></strong><span class="koboSpan" id="kobo.2001.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2002.1">location</span></strong><span class="koboSpan" id="kobo.2003.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.2004.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2005.1">if</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2006.1">Defines a </span><a id="_idIndexMarker209"/><span class="koboSpan" id="kobo.2007.1">post-completion action, a URI that will be called by NGINX after the request has </span><span class="No-Break"><span class="koboSpan" id="kobo.2008.1">been completed.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2009.1">Syntax</span></strong><span class="koboSpan" id="kobo.2010.1">: U</span><a id="_idTextAnchor340"/><span class="koboSpan" id="kobo.2011.1">RI or named </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2012.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2013.1"> block</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2014.1">Example</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2015.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2016.1">
location /payment/ {
    post_action /scripts/done.php;
}</span></pre> <p><span class="koboSpan" id="kobo.2017.1">We covered most of the directives we might need in the future. </span><span class="koboSpan" id="kobo.2017.2">Here’s an example of another set of optional directives that we recommend you use. </span><span class="koboSpan" id="kobo.2017.3">Please note that at the time of writing this book, HTT</span><a id="_idTextAnchor341"/><span class="koboSpan" id="kobo.2018.1">P/3 and </span><strong class="bold"><span class="koboSpan" id="kobo.2019.1">Quick UDP Internet Connections</span></strong><span class="koboSpan" id="kobo.2020.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2021.1">QUIC</span></strong><span class="koboSpan" id="kobo.2022.1">) are neither fully </span><a id="_idIndexMarker210"/><span class="koboSpan" id="kobo.2023.1">supported nor deployed </span><span class="No-Break"><span class="koboSpan" id="kobo.2024.1">in NGINX.</span></span></p>
<h1 id="_idParaDest-76"><a id="_idTextAnchor342"/><span class="koboSpan" id="kobo.2025.1">Exploring the directives of HTTP/2</span></h1>
<p><span class="koboSpan" id="kobo.2026.1">NGINX added </span><a id="_idIndexMarker211"/><span class="koboSpan" id="kobo.2027.1">support for </span><strong class="bold"><span class="koboSpan" id="kobo.2028.1">HTTP/2</span></strong><span class="koboSpan" id="kobo.2029.1"> in version </span><strong class="source-inline"><span class="koboSpan" id="kobo.2030.1">1.9.5</span></strong><span class="koboSpan" id="kobo.2031.1"> and superseded</span><a id="_idIndexMarker212"/><span class="koboSpan" id="kobo.2032.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.2033.1">SPDY</span></strong><span class="koboSpan" id="kobo.2034.1"> (pronounced </span><strong class="bold"><span class="koboSpan" id="kobo.2035.1">SPeeDY</span></strong><span class="koboSpan" id="kobo.2036.1">) module, meaning that, as of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2037.1">1.9.5</span></strong><span class="koboSpan" id="kobo.2038.1">, SPDY is no longer available, and we now have to </span><span class="No-Break"><span class="koboSpan" id="kobo.2039.1">use HTTP/2.</span></span></p>
<p><span class="koboSpan" id="kobo.2040.1">If you installed NGINX via a package manager, this module is most likely enabled; if you compiled it yourself, please make sure you compiled NGINX using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2041.1">--with_http_v2_module</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2042.1">configure flag.</span></span></p>
<p><span class="koboSpan" id="kobo.2043.1">Similarly to SPDY, HTTP/2 requires the use of SSL, which is good practice regardless. </span><span class="koboSpan" id="kobo.2043.2">These days, SSL certificates can be issued for free by services such as </span><em class="italic"><span class="koboSpan" id="kobo.2044.1">Let’s Encrypt</span></em><span class="koboSpan" id="kobo.2045.1">, so this is </span><span class="No-Break"><span class="koboSpan" id="kobo.2046.1">highl</span><a id="_idTextAnchor343"/><span class="koboSpan" id="kobo.2047.1">y recommended.</span></span></p>
<p><span class="koboSpan" id="kobo.2048.1">To enable HTTP/v2, add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2049.1">http2</span></strong><span class="koboSpan" id="kobo.2050.1"> flag to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2051.1">li</span><a id="_idTextAnchor344"/><span class="koboSpan" id="kobo.2052.1">s</span><a id="_idTextAnchor345"/><span class="koboSpan" id="kobo.2053.1">ten</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2054.1"> directive:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2055.1">
listen 443 ssl http2;</span></pre> <p><span class="koboSpan" id="kobo.2056.1">Let’s explore the different module directives in </span><span class="No-Break"><span class="koboSpan" id="kobo.2057.1">this section.</span></span></p>
<h2 id="_idParaDest-77"><a id="_idTextAnchor346"/><span class="koboSpan" id="kobo.2058.1">http2_chunk_size</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2059.1">Context</span></strong><span class="koboSpan" id="kobo.2060.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2061.1">http</span></strong><span class="koboSpan" id="kobo.2062.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2063.1">server</span></strong><span class="koboSpan" id="kobo.2064.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.2065.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2066.1">location</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2067.1">Set</span><a id="_idTextAnchor347"/><span class="koboSpan" id="kobo.2068.1">s</span><a id="_idTextAnchor348"/><span class="koboSpan" id="kobo.2069.1"> the </span><a id="_idIndexMarker213"/><span class="koboSpan" id="kobo.2070.1">maximum size of chunks into which the response body </span><span class="No-Break"><span class="koboSpan" id="kobo.2071.1">is sliced.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2072.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2073.1">: Size</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2074.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2075.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2076.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2077.1">8k</span></strong></span></p>
<h2 id="_idParaDest-78"><a id="_idTextAnchor349"/><span class="koboSpan" id="kobo.2078.1">http2_body_preread_size</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2079.1">Context</span></strong><span class="koboSpan" id="kobo.2080.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2081.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2082.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2083.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2084.1">Sets the size</span><a id="_idIndexMarker214"/><span class="koboSpan" id="kobo.2085.1"> of the </span><a id="_idTextAnchor350"/><span class="koboSpan" id="kobo.2086.1">r</span><a id="_idTextAnchor351"/><span class="koboSpan" id="kobo.2087.1">equest buffer in which the body may be saved before it </span><span class="No-Break"><span class="koboSpan" id="kobo.2088.1">is processed.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2089.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2090.1">: Size</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2091.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2092.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2093.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2094.1">64k</span></strong></span></p>
<h2 id="_idParaDest-79"><a id="_idTextAnchor352"/><span class="koboSpan" id="kobo.2095.1">http2_idle_timeout</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2096.1">Context</span></strong><span class="koboSpan" id="kobo.2097.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2098.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2099.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2100.1">server</span></strong></span></p>
<p><a id="_idTextAnchor353"/><a id="_idTextAnchor354"/><span class="koboSpan" id="kobo.2101.1">Sets the</span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.2102.1"> time after which the connection is closed due </span><span class="No-Break"><span class="koboSpan" id="kobo.2103.1">to inactivity.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2104.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2105.1">: Time</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2106.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2107.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2108.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2109.1">3m</span></strong></span></p>
<h2 id="_idParaDest-80"><a id="_idTextAnchor355"/><span class="koboSpan" id="kobo.2110.1">http2_max_concurrent_streams</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2111.1">Context</span></strong><span class="koboSpan" id="kobo.2112.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2113.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2114.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2115.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2116.1">S</span><a id="_idTextAnchor356"/><span class="koboSpan" id="kobo.2117.1">e</span><a id="_idTextAnchor357"/><span class="koboSpan" id="kobo.2118.1">ts the </span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.2119.1">maximum number of concurrent HTTP/2 streams in </span><span class="No-Break"><span class="koboSpan" id="kobo.2120.1">a connection.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2121.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2122.1">: Number</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2123.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2124.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2125.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2126.1">128</span></strong></span></p>
<h2 id="_idParaDest-81"><a id="_idTextAnchor358"/><span class="koboSpan" id="kobo.2127.1">http2_max_field_size</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2128.1">Context</span></strong><span class="koboSpan" id="kobo.2129.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2130.1">http</span></strong> <a id="_idTextAnchor359"/><span class="No-Break"><span class="koboSpan" id="kobo.2131.1">a</span><a id="_idTextAnchor360"/><span class="koboSpan" id="kobo.2132.1">nd </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2133.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2134.1">Limits the </span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.2135.1">maximum size of a compressed request </span><span class="No-Break"><span class="koboSpan" id="kobo.2136.1">header field.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2137.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2138.1">: Size</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2139.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2140.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2141.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2142.1">4k</span></strong></span></p>
<h2 id="_idParaDest-82"><a id="_idTextAnchor361"/><span class="koboSpan" id="kobo.2143.1">http2_max_header_size</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2144.1">Context</span></strong><span class="koboSpan" id="kobo.2145.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2146.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2147.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2148.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2149.1">Limits </span><a id="_idTextAnchor362"/><span class="koboSpan" id="kobo.2150.1">t</span><a id="_idTextAnchor363"/><span class="koboSpan" id="kobo.2151.1">he</span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.2152.1"> maximum size of the entire request header list </span><span class="No-Break"><span class="koboSpan" id="kobo.2153.1">after decompression.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2154.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2155.1">: Size</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2156.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2157.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2158.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2159.1">16k</span></strong></span></p>
<h2 id="_idParaDest-83"><a id="_idTextAnchor364"/><span class="koboSpan" id="kobo.2160.1">http2_max_requests</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2161.1">Context</span></strong><span class="koboSpan" id="kobo.2162.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2163.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2164.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2165.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2166.1">Sets the </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.2167.1">maximum number of requests that can be served through one HTTP/2 connection, after whi</span><a id="_idTextAnchor365"/><span class="koboSpan" id="kobo.2168.1">c</span><a id="_idTextAnchor366"/><span class="koboSpan" id="kobo.2169.1">h the connection is closed and the client should use a </span><span class="No-Break"><span class="koboSpan" id="kobo.2170.1">new connection.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2171.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2172.1">: Number</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2173.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2174.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2175.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2176.1">1000</span></strong></span></p>
<h2 id="_idParaDest-84"><span class="koboSpan" id="kobo.2177.1">http2_rec</span><a id="_idTextAnchor367"/><span class="koboSpan" id="kobo.2178.1">v</span><a id="_idTextAnchor368"/><span class="koboSpan" id="kobo.2179.1">_buffer_size</span></h2>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2180.1">Context</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2181.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2182.1">http</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2183.1">Sets the </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.2184.1">size of the per-worker </span><span class="No-Break"><span class="koboSpan" id="kobo.2185.1">input buffer.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2186.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2187.1">: Size</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2188.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2189.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2190.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2191.1">256k</span></strong></span></p>
<h2 id="_idParaDest-85"><a id="_idTextAnchor369"/><span class="koboSpan" id="kobo.2192.1">http2_recv_timeout</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.2193.1">Context</span></strong><span class="koboSpan" id="kobo.2194.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2195.1">http</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2196.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2197.1">server</span></strong></span></p>
<p><span class="koboSpan" id="kobo.2198.1">Sets the </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.2199.1">timeout </span><a id="_idTextAnchor370"/><span class="koboSpan" id="kobo.2200.1">f</span><a id="_idTextAnchor371"/><span class="koboSpan" id="kobo.2201.1">or expecting more data from the client, after which the connection </span><span class="No-Break"><span class="koboSpan" id="kobo.2202.1">is closed.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2203.1">Syntax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2204.1">: Time</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.2205.1">Default </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2206.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2207.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2208.1">30</span></strong></span></p>
<h2 id="_idParaDest-86"><a id="_idTextAnchor372"/><span class="koboSpan" id="kobo.2209.1">Module variables</span></h2>
<p><span class="koboSpan" id="kobo.2210.1">The HTTP/2 module sets</span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.2211.1"> only a single variable to determine whether HTTP/2 is used </span><span class="No-Break"><span class="koboSpan" id="kobo.2212.1">or not:</span></span></p>
<p class="IMG---Figure"><a id="_idTextAnchor373"/></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-3">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2213.1">Variable</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2214.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2215.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2216.1">http2</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2217.1">h2</span></strong><span class="koboSpan" id="kobo.2218.1"> if HTTP/2 over TLS, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2219.1">h2c</span></strong><span class="koboSpan" id="kobo.2220.1"> if over cleartext TCP. </span><span class="koboSpan" id="kobo.2220.2">Empty string (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2221.1">(  )</span></strong><span class="koboSpan" id="kobo.2222.1">) if HTTP/2 is </span><span class="No-Break"><span class="koboSpan" id="kobo.2223.1">not used.</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.2224.1">Now that we have finished covering most of the directives, let’s move on to variables and the extended configuration of </span><span class="No-Break"><span class="koboSpan" id="kobo.2225.1">these directives.</span></span></p>
<h1 id="_idParaDest-87"><a id="_idTextAnchor374"/><span class="koboSpan" id="kobo.2226.1">Exploring the variables introduced by the HTTP core module</span></h1>
<p><span class="koboSpan" id="kobo.2227.1">The HTTP core module </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.2228.1">introduces a large set of variables that you can use within the value of directives. </span><span class="koboSpan" id="kobo.2228.2">Be careful, though, as only a handful of directives accept variables in the definition of their value. </span><span class="koboSpan" id="kobo.2228.3">If you insert a variable in the value of a directive that does not accept variables, no error is reported; instead, the variable name appears as </span><span class="No-Break"><span class="koboSpan" id="kobo.2229.1">raw text.</span></span></p>
<p><span class="koboSpan" id="kobo.2230.1">There are three different kinds of variables that you will come across. </span><span class="koboSpan" id="kobo.2230.2">The first set represents the values transmitted in the headers of the client request. </span><span class="koboSpan" id="kobo.2230.3">The second set corresponds to the headers of the response sent to the client. </span><span class="koboSpan" id="kobo.2230.4">Finally, the third set comprises variables that are completely generated </span><span class="No-Break"><span class="koboSpan" id="kobo.2231.1">by NGINX</span><a id="_idTextAnchor375"/><span class="koboSpan" id="kobo.2232.1">.</span></span><a id="_idTextAnchor376"/></p>
<h2 id="_idParaDest-88"><a id="_idTextAnchor377"/><span class="koboSpan" id="kobo.2233.1">Request headers</span></h2>
<p><span class="koboSpan" id="kobo.2234.1">NGINX lets you </span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.2235.1">access client request headers in the form of variables that you will be able to employ later on in </span><span class="No-Break"><span class="koboSpan" id="kobo.2236.1">the configuration:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002-1">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2237.1">Variable</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2238.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2239.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2240.1">http_host</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2241.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2242.1">Host</span></strong><span class="koboSpan" id="kobo.2243.1"> HTTP header, a string indicating the hostname that the client is trying </span><span class="No-Break"><span class="koboSpan" id="kobo.2244.1">to reach.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2245.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2246.1">http_user_agent</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2247.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2248.1">User-Agent</span></strong><span class="koboSpan" id="kobo.2249.1"> HTTP header, a string indicating the web browser of </span><span class="No-Break"><span class="koboSpan" id="kobo.2250.1">the client.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2251.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2252.1">http_referer</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2253.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2254.1">Referer</span></strong><span class="koboSpan" id="kobo.2255.1"> HTTP header, a string indicating the URL of the previous page from which the </span><span class="No-Break"><span class="koboSpan" id="kobo.2256.1">client comes.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2257.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2258.1">http_via</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2259.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2260.1">Via</span></strong><span class="koboSpan" id="kobo.2261.1"> HTTP header, which informs us about possible proxies used by </span><span class="No-Break"><span class="koboSpan" id="kobo.2262.1">the client.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2263.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2264.1">http_x_forwarded_for</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2265.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2266.1">X-Forwarded-For</span></strong><span class="koboSpan" id="kobo.2267.1"> HTTP header, which shows the actual IP address of the client if the client is behind </span><span class="No-Break"><span class="koboSpan" id="kobo.2268.1">a proxy.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2269.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2270.1">http_cookie</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2271.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2272.1">Cookie</span></strong><span class="koboSpan" id="kobo.2273.1"> HTTP header, which contains cookie data sent by </span><span class="No-Break"><span class="koboSpan" id="kobo.2274.1">the client.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2275.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2276.1">http_...</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2277.1">Additional headers sent by the client can be retrieved using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2278.1">$http_</span></strong><span class="koboSpan" id="kobo.2279.1"> followed by the header name in lowercase and with dashes (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2280.1">-</span></strong><span class="koboSpan" id="kobo.2281.1">) replaced by </span><span class="No-Break"><span class="koboSpan" id="kobo.2282.1">underscores (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2283.1">_</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2284.1">).</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor378"/><span class="koboSpan" id="kobo.2285.1">Table 3.1: A list of customizable HTTP request headers</span><a id="_idTextAnchor379"/></p>
<h2 id="_idParaDest-89"><a id="_idTextAnchor380"/><span class="koboSpan" id="kobo.2286.1">Response headers</span></h2>
<p><span class="koboSpan" id="kobo.2287.1">In a similar fashion, you </span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.2288.1">are allowed to access the HTTP headers of the response that was sent to the client. </span><span class="koboSpan" id="kobo.2288.2">These variables are not available at all times—they will only carry a value after the response is sent; for instance, at the time of writing messages in </span><span class="No-Break"><span class="koboSpan" id="kobo.2289.1">the logs:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table003-1">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2290.1">Variable</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2291.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2292.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2293.1">sent_http_content_type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2294.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2295.1">Content-Type</span></strong><span class="koboSpan" id="kobo.2296.1"> HTTP header, indicating the MIME type of the resource </span><span class="No-Break"><span class="koboSpan" id="kobo.2297.1">being transmitted.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2298.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2299.1">sent_http_content_length</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2300.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2301.1">Content-Length</span></strong><span class="koboSpan" id="kobo.2302.1"> HTTP header, informing the client of the response </span><span class="No-Break"><span class="koboSpan" id="kobo.2303.1">body length.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2304.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2305.1">sent_http_location</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2306.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2307.1">Location</span></strong><span class="koboSpan" id="kobo.2308.1"> HTTP header, which indicates that the location of the desired resource is different from the one specified in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2309.1">original request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2310.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2311.1">sent_http_last_modified</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2312.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2313.1">Last-Modified</span></strong><span class="koboSpan" id="kobo.2314.1"> HTTP header, corresponding to the modification date of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2315.1">requested resource.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2316.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2317.1">sent_http_connection</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2318.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2319.1">Connection</span></strong><span class="koboSpan" id="kobo.2320.1"> HTTP header, defining whether the connection will be kept alive </span><span class="No-Break"><span class="koboSpan" id="kobo.2321.1">or closed.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2322.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2323.1">sent_http_keep_alive</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2324.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2325.1">Keep-Alive</span></strong><span class="koboSpan" id="kobo.2326.1"> HTTP header that defines the amount of time a connection will be </span><span class="No-Break"><span class="koboSpan" id="kobo.2327.1">kept alive.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2328.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2329.1">sent_http_transfer_encoding</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2330.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2331.1">Transfer-Encoding</span></strong><span class="koboSpan" id="kobo.2332.1"> HTTP header, giving information about the response body encoding method (such as </span><span class="No-Break"><span class="koboSpan" id="kobo.2333.1">compress, gzip).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2334.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2335.1">sent_http_cache_control</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2336.1">Value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2337.1">Cache-Control</span></strong><span class="koboSpan" id="kobo.2338.1"> HTTP header, telling us whether the client browser should cache the resource </span><span class="No-Break"><span class="koboSpan" id="kobo.2339.1">or not.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2340.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2341.1">sent_http_...</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2342.1">Additional headers sent to the client can be retrieved using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2343.1">$sent_http_</span></strong><span class="koboSpan" id="kobo.2344.1"> followed by the header name, in lowercase and with dashes (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2345.1">-</span></strong><span class="koboSpan" id="kobo.2346.1">) replaced by </span><span class="No-Break"><span class="koboSpan" id="kobo.2347.1">underscores (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2348.1">_</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2349.1">).</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor381"/><span class="koboSpan" id="kobo.2350.1">Table 3.2: A list of customizable HTTP response headers</span></p>
<h2 id="_idParaDest-90"><a id="_idTextAnchor382"/><span class="koboSpan" id="kobo.2351.1">NGINX-generated headers</span></h2>
<p><span class="koboSpan" id="kobo.2352.1">Apart </span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.2353.1">from HTTP headers, NGINX provides a large of variables concerning the request, the way it was and will be handled, as well as settings in use with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2354.1">current configuration:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table004">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2355.1">Variable</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2356.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2357.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2358.1">arg_XXX</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2359.1">Allows you to access the query string (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2360.1">GET</span></strong><span class="koboSpan" id="kobo.2361.1"> parameters), where </span><strong class="source-inline"><span class="koboSpan" id="kobo.2362.1">XXX</span></strong><span class="koboSpan" id="kobo.2363.1"> is the name of the parameter you want </span><span class="No-Break"><span class="koboSpan" id="kobo.2364.1">to utilize.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2365.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2366.1">args</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2367.1">All of the arguments of the query string </span><span class="No-Break"><span class="koboSpan" id="kobo.2368.1">combined together.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2369.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2370.1">binary_remote_addr</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2371.1">IP address of the client as binary data (</span><span class="No-Break"><span class="koboSpan" id="kobo.2372.1">4 bytes).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2373.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2374.1">body_bytes_sent</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2375.1">Amount of bytes sent in the body of the response (does not include </span><span class="No-Break"><span class="koboSpan" id="kobo.2376.1">response headers).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2377.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2378.1">bytes_sent</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2379.1">Amount of bytes sent to </span><span class="No-Break"><span class="koboSpan" id="kobo.2380.1">the client.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2381.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2382.1">connection</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2383.1">Serial number identifying </span><span class="No-Break"><span class="koboSpan" id="kobo.2384.1">a connection.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2385.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2386.1">connection_requests</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2387.1">Amount of requests already served by the </span><span class="No-Break"><span class="koboSpan" id="kobo.2388.1">current connection.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2389.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2390.1">content_length</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2391.1">Equates to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2392.1">Content-Length</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2393.1">HTTP header.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2394.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2395.1">content_type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2396.1">Equates to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2397.1">Content-Type</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2398.1">HTTP header.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2399.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2400.1">cookie_XXX</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2401.1">Allows you to access cookie data where </span><strong class="source-inline"><span class="koboSpan" id="kobo.2402.1">XXX</span></strong><span class="koboSpan" id="kobo.2403.1"> is the name of the parameter you want </span><span class="No-Break"><span class="koboSpan" id="kobo.2404.1">to utilize.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2405.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2406.1">document_root</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2407.1">Returns the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2408.1">root</span></strong><span class="koboSpan" id="kobo.2409.1"> directive for the </span><span class="No-Break"><span class="koboSpan" id="kobo.2410.1">current request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2411.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2412.1">document_uri</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2413.1">Returns the current URI of the request. </span><span class="koboSpan" id="kobo.2413.2">It may differ from the original request URI if internal redirects were performed. </span><span class="koboSpan" id="kobo.2413.3">It is identical to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2414.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2415.1">uri</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2416.1"> variable.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2417.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2418.1">host</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2419.1">This variable equates to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2420.1">host</span></strong><span class="koboSpan" id="kobo.2421.1"> HTTP header of the request. </span><span class="koboSpan" id="kobo.2421.2">NGINX itself gives this variable a value for cases where the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2422.1">host</span></strong><span class="koboSpan" id="kobo.2423.1"> header is not provided in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2424.1">original request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2425.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2426.1">hostname</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2427.1">Returns the system hostname of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2428.1">server computer.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2429.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2430.1">https</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2431.1">Set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2432.1">on</span></strong><span class="koboSpan" id="kobo.2433.1"> for HTTPS connections; </span><span class="No-Break"><span class="koboSpan" id="kobo.2434.1">empty otherwise.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2435.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2436.1">is_args</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2437.1">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2438.1">$args</span></strong><span class="koboSpan" id="kobo.2439.1"> variable is defined, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2440.1">$is_args</span></strong><span class="koboSpan" id="kobo.2441.1"> equates to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2442.1">?</span></strong><span class="koboSpan" id="kobo.2443.1">. </span><span class="koboSpan" id="kobo.2443.2">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.2444.1">$args</span></strong><span class="koboSpan" id="kobo.2445.1"> is empty, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2446.1">$is_args</span></strong><span class="koboSpan" id="kobo.2447.1"> is empty as well. </span><span class="koboSpan" id="kobo.2447.2">You may use this variable for constructing a URI that optionally comes with a query string, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2448.1">index.php$is_args$args</span></strong><span class="koboSpan" id="kobo.2449.1">. </span><span class="koboSpan" id="kobo.2449.2">If there is any query string argument in the request, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2450.1">$is_args</span></strong><span class="koboSpan" id="kobo.2451.1"> is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2452.1">?</span></strong><span class="koboSpan" id="kobo.2453.1">, making this a </span><span class="No-Break"><span class="koboSpan" id="kobo.2454.1">valid URI.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2455.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2456.1">limit_rate</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2457.1">Returns the per-connection transfer rate limit, as defined by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2458.1">limit_rate</span></strong><span class="koboSpan" id="kobo.2459.1"> directive. </span><span class="koboSpan" id="kobo.2459.2">You are allowed to edit this variable by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2460.1">set </span></strong><span class="koboSpan" id="kobo.2461.1">(directive from the </span><em class="italic"><span class="koboSpan" id="kobo.2462.1">Rewrite module</span></em><span class="koboSpan" id="kobo.2463.1">): </span><strong class="source-inline"><span class="koboSpan" id="kobo.2464.1">set $</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2465.1">limit_rate 128k;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2466.1">.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2467.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2468.1">msec</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2469.1">Returns the current time (in seconds </span><span class="No-Break"><span class="koboSpan" id="kobo.2470.1">and milliseconds).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2471.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2472.1">nginx_version</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2473.1">Returns the version of NGINX you </span><span class="No-Break"><span class="koboSpan" id="kobo.2474.1">are running.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2475.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2476.1">pid</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2477.1">Returns the NGINX </span><span class="No-Break"><span class="koboSpan" id="kobo.2478.1">process identifier.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2479.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2480.1">pipe</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2481.1">If the current request is pipelined, this variable is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2482.1">p</span></strong><span class="koboSpan" id="kobo.2483.1">; otherwise, the value </span><span class="No-Break"><span class="koboSpan" id="kobo.2484.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2485.1">[.]</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2486.1">.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2487.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2488.1">proxy_protocol_addr</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2489.1">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2490.1">proxy_protocol</span></strong><span class="koboSpan" id="kobo.2491.1"> parameter is enabled on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2492.1">listen</span></strong><span class="koboSpan" id="kobo.2493.1"> directive, this variable will contain the </span><span class="No-Break"><span class="koboSpan" id="kobo.2494.1">client address.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2495.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2496.1">query_string</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2497.1">Identical </span><span class="No-Break"><span class="koboSpan" id="kobo.2498.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2499.1">$args</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2500.1">.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2501.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2502.1">remote_addr</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2503.1">Returns the IP address of </span><span class="No-Break"><span class="koboSpan" id="kobo.2504.1">the client.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2505.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2506.1">remote_port</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2507.1">Returns the port of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2508.1">client socket.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2509.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2510.1">remote_user</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2511.1">Returns the client username if they </span><span class="No-Break"><span class="koboSpan" id="kobo.2512.1">used authentication.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2513.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2514.1">realpath_root</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2515.1">Returns the document root in the client request, with symbolic links resolved into the </span><span class="No-Break"><span class="koboSpan" id="kobo.2516.1">actual path.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2517.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2518.1">request_body</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2519.1">Returns the body of the client request, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2520.1">–</span></strong><span class="koboSpan" id="kobo.2521.1"> if the body </span><span class="No-Break"><span class="koboSpan" id="kobo.2522.1">is empty.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2523.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2524.1">request_body_file</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2525.1">If the request body was saved (see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2526.1">client_body_in_file_only</span></strong><span class="koboSpan" id="kobo.2527.1"> directive), this variable indicates the path of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2528.1">temporary file.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2529.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2530.1">request_completion</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2531.1">Returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.2532.1">OK</span></strong><span class="koboSpan" id="kobo.2533.1"> if the request is completed; an </span><em class="italic"><span class="koboSpan" id="kobo.2534.1">empty </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2535.1">string</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2536.1"> otherwise.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2537.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2538.1">request_filename</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2539.1">Returns the </span><em class="italic"><span class="koboSpan" id="kobo.2540.1">full filename</span></em><span class="koboSpan" id="kobo.2541.1"> served in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2542.1">current request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2543.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2544.1">request_length</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2545.1">Returns the </span><em class="italic"><span class="koboSpan" id="kobo.2546.1">total length</span></em><span class="koboSpan" id="kobo.2547.1"> of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2548.1">client request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2549.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2550.1">request_method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2551.1">Indicates the HTTP method used in the request, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2552.1">GET</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2553.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2554.1">POST</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2555.1">.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2556.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2557.1">request_time</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2558.1">Returns the amount of time elapsed since the first byte was read from the client (seconds and </span><span class="No-Break"><span class="koboSpan" id="kobo.2559.1">milliseconds value).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2560.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2561.1">request_id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2562.1">Unique request identifier generated from 16 random bytes, </span><span class="No-Break"><span class="koboSpan" id="kobo.2563.1">in hexadecimal.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2564.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2565.1">request_uri</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2566.1">Corresponds to the original URI of the request; remains unmodified all through the process (</span><span class="No-Break"><span class="koboSpan" id="kobo.2567.1">unlike </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2568.1">$document_uri/$uri</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2569.1">).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2570.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2571.1">scheme</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2572.1">Returns either </span><strong class="source-inline"><span class="koboSpan" id="kobo.2573.1">http</span></strong><span class="koboSpan" id="kobo.2574.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2575.1">https</span></strong><span class="koboSpan" id="kobo.2576.1">, depending on </span><span class="No-Break"><span class="koboSpan" id="kobo.2577.1">the request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2578.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2579.1">server_addr</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2580.1">Returns the IP address of the server. </span><span class="koboSpan" id="kobo.2580.2">Be careful, as each use of the variable requires a system call, which could potentially affect overall performance in the case of </span><span class="No-Break"><span class="koboSpan" id="kobo.2581.1">high-traffic setups.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2582.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2583.1">server_name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2584.1">Indicates the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2585.1">server_name</span></strong><span class="koboSpan" id="kobo.2586.1"> directive that was used while processing </span><span class="No-Break"><span class="koboSpan" id="kobo.2587.1">the request.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2588.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2589.1">server_port</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2590.1">Indicates the port of the server socket that received the </span><span class="No-Break"><span class="koboSpan" id="kobo.2591.1">request data.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2592.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2593.1">server_protocol</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2594.1">Returns the protocol and version, usually HTTP/1.0 </span><span class="No-Break"><span class="koboSpan" id="kobo.2595.1">or HTTP/1.1.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2596.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2597.1">status</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2598.1">Returns the response </span><span class="No-Break"><span class="koboSpan" id="kobo.2599.1">status code.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2600.1">$tcpinfo_rtt, $tcpinfo_rttvar, $</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2601.1">tcpinfo_snd_cwnd, $tcpinfo_rcv_space</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2602.1">If your operating system supports the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2603.1">TCP_INFO</span></strong><span class="koboSpan" id="kobo.2604.1"> socket option, these variables will be populated with information on the current client </span><span class="No-Break"><span class="koboSpan" id="kobo.2605.1">TCP connection.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2606.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2607.1">time_iso8601, $time_local</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2608.1">Provides the current time respectively in </span><em class="italic"><span class="koboSpan" id="kobo.2609.1">ISO 8601</span></em><span class="koboSpan" id="kobo.2610.1"> and local formats for use with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2611.1">access_log</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2612.1"> directive.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2613.1">$</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2614.1">uri</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.2615.1">Identical </span><span class="No-Break"><span class="koboSpan" id="kobo.2616.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2617.1">$document_uri</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2618.1">.</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor383"/><span class="koboSpan" id="kobo.2619.1">Table 3.3: A list of various customizable variables; these variables are optional but might come in handy</span></p>
<h1 id="_idParaDest-91"><a id="_idTextAnchor384"/><span class="koboSpan" id="kobo.2620.1">Understanding and exploring the location block</span></h1>
<p><span class="koboSpan" id="kobo.2621.1">We have </span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.2622.1">established that NGINX lets you fine-tune your configuration down to three levels—at the protocol level (the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2623.1">http</span></strong><span class="koboSpan" id="kobo.2624.1"> block), the server level (the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2625.1">server</span></strong><span class="koboSpan" id="kobo.2626.1"> block), and the requested URI level (the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2627.1">location</span></strong><span class="koboSpan" id="kobo.2628.1"> block). </span><span class="koboSpan" id="kobo.2628.2">Let’s now go into more detail about the </span><span class="No-Break"><span class="koboSpan" id="kobo.2629.1">third one</span><a id="_idTextAnchor385"/><span class="koboSpan" id="kobo.2630.1">.</span></span><a id="_idTextAnchor386"/></p>
<h2 id="_idParaDest-92"><a id="_idTextAnchor387"/><span class="koboSpan" id="kobo.2631.1">Location modifier</span></h2>
<p><span class="koboSpan" id="kobo.2632.1">NGINX </span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.2633.1">allows you to define </span><strong class="source-inline"><span class="koboSpan" id="kobo.2634.1">location</span></strong><span class="koboSpan" id="kobo.2635.1"> blocks by specifying a pattern that will be matched against the requested </span><span class="No-Break"><span class="koboSpan" id="kobo.2636.1">document URI:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2637.1">
server {
    server_name website.com;
    location /admin/ {
    # The configuration you place here only applies to
    # http://website.com/admin/
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2638.1">Instead of a simple folder name, you can indeed insert complex patterns. </span><span class="koboSpan" id="kobo.2638.2">The syntax of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2639.1">location</span></strong><span class="koboSpan" id="kobo.2640.1"> block is </span><span class="No-Break"><span class="koboSpan" id="kobo.2641.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2642.1">
location [=|~|~*|^~|@] pattern { … }</span></pre> <p><span class="koboSpan" id="kobo.2643.1">The first optional argument is a symbol called </span><strong class="source-inline"><span class="koboSpan" id="kobo.2644.1">location</span></strong><span class="koboSpan" id="kobo.2645.1"> that will define the way NGINX matches the specified pattern and also defines the very nature of the pattern (a simple string or regular expression). </span><span class="koboSpan" id="kobo.2645.2">The underlying subsections detail the different modifiers and </span><span class="No-Break"><span class="koboSpan" id="kobo.2646.1">their behavio</span><a id="_idTextAnchor388"/><span class="koboSpan" id="kobo.2647.1">r</span><a id="_idTextAnchor389"/><span class="koboSpan" id="kobo.2648.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.2649.1">The = modifier</span></h3>
<p><span class="koboSpan" id="kobo.2650.1">The</span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.2651.1"> requested document URI must match the specified pattern exactly. </span><span class="koboSpan" id="kobo.2651.2">The pattern here is limited to a simple literal string; you cannot use a </span><span class="No-Break"><span class="koboSpan" id="kobo.2652.1">regular expression:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2653.1">
server {
    server_name website.com;
    location = /abcd {
    [...]
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2654.1">The configuration in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2655.1">location</span></strong><span class="koboSpan" id="kobo.2656.1"> block has the </span><span class="No-Break"><span class="koboSpan" id="kobo.2657.1">following attributes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2658.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2659.1">http://website.com/abcd</span></strong><span class="koboSpan" id="kobo.2660.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2661.1">exact match)</span></span></li>
<li><span class="koboSpan" id="kobo.2662.1">May apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2663.1">http://website.com/ABCD</span></strong><span class="koboSpan" id="kobo.2664.1"> (it is case-sensitive if your operating system uses a </span><span class="No-Break"><span class="koboSpan" id="kobo.2665.1">case-sensitive filesystem)</span></span></li>
<li><span class="koboSpan" id="kobo.2666.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2667.1">http://website.com/abcd?param1&amp;param2</span></strong><span class="koboSpan" id="kobo.2668.1"> (regardless of query </span><span class="No-Break"><span class="koboSpan" id="kobo.2669.1">string arguments)</span></span></li>
<li><span class="koboSpan" id="kobo.2670.1">Does not apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2671.1">http://website.com/abcd/</span></strong><span class="koboSpan" id="kobo.2672.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2673.1">trailing slash)</span></span></li>
<li><span class="koboSpan" id="kobo.2674.1">Does not apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2675.1">http://website.com/abcde</span></strong><span class="koboSpan" id="kobo.2676.1"> (extra characters after the </span><span class="No-Break"><span class="koboSpan" id="kobo.2677.1">specified patte</span><a id="_idTextAnchor390"/><span class="koboSpan" id="kobo.2678.1">r</span><a id="_idTextAnchor391"/><span class="koboSpan" id="kobo.2679.1">n)</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.2680.1">No modifier</span></h3>
<p><span class="koboSpan" id="kobo.2681.1">The requested </span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.2682.1">document URI must begin with the specified pattern. </span><span class="koboSpan" id="kobo.2682.2">You may not use </span><span class="No-Break"><span class="koboSpan" id="kobo.2683.1">regular expressions:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2684.1">
server {
    server_name website.com;
    location /abcd {
    [...]
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2685.1">The configuration</span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.2686.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2687.1">location</span></strong><span class="koboSpan" id="kobo.2688.1"> block has the </span><span class="No-Break"><span class="koboSpan" id="kobo.2689.1">following attributes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2690.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2691.1">http://website.com/abcd</span></strong><span class="koboSpan" id="kobo.2692.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2693.1">exact match)</span></span></li>
<li><span class="koboSpan" id="kobo.2694.1">May apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2695.1">http://website.com/ABCD</span></strong><span class="koboSpan" id="kobo.2696.1"> (it is case-sensitive if your operating system uses a </span><span class="No-Break"><span class="koboSpan" id="kobo.2697.1">case-sensitive filesystem)</span></span></li>
<li><span class="koboSpan" id="kobo.2698.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2699.1">http://website.com/abcd?param1&amp;param2</span></strong><span class="koboSpan" id="kobo.2700.1"> (regardless of query </span><span class="No-Break"><span class="koboSpan" id="kobo.2701.1">string arguments)</span></span></li>
<li><span class="koboSpan" id="kobo.2702.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2703.1">http://website.com/abcd/</span></strong><span class="koboSpan" id="kobo.2704.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2705.1">trailing slash)</span></span></li>
<li><span class="koboSpan" id="kobo.2706.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2707.1">http://website.com/abcde</span></strong><span class="koboSpan" id="kobo.2708.1"> (extra characters after the </span><span class="No-Break"><span class="koboSpan" id="kobo.2709.1">specified pat</span><a id="_idTextAnchor392"/><span class="koboSpan" id="kobo.2710.1">t</span><a id="_idTextAnchor393"/><span class="koboSpan" id="kobo.2711.1">ern)</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.2712.1">The ~ modifier</span></h3>
<p><span class="koboSpan" id="kobo.2713.1">The </span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.2714.1">requested URI must be a case-sensitive match for the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.2715.1">regular expression:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2716.1">
server {
    server_name website.com;
    location ~ ^/abcd$ {
    [...]
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2717.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2718.1">^/abcd$</span></strong><span class="koboSpan" id="kobo.2719.1"> regular expression used in this example specifies that the pattern must begin (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2720.1">^</span></strong><span class="koboSpan" id="kobo.2721.1">) with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2722.1">/</span></strong><span class="koboSpan" id="kobo.2723.1">, be followed by </span><strong class="source-inline"><span class="koboSpan" id="kobo.2724.1">abc</span></strong><span class="koboSpan" id="kobo.2725.1">, and finish (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2726.1">$</span></strong><span class="koboSpan" id="kobo.2727.1">) with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2728.1">d</span></strong><span class="koboSpan" id="kobo.2729.1">. </span><span class="koboSpan" id="kobo.2729.2">Consequently, the configuration in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2730.1">location</span></strong><span class="koboSpan" id="kobo.2731.1"> block has the </span><span class="No-Break"><span class="koboSpan" id="kobo.2732.1">following attributes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2733.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2734.1">http://website.com/abcd</span></strong><span class="koboSpan" id="kobo.2735.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2736.1">exact match)</span></span></li>
<li><span class="koboSpan" id="kobo.2737.1">Does not apply to </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2738.1">http://website.com/ABCD</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2739.1"> (case-sensitive)</span></span></li>
<li><span class="koboSpan" id="kobo.2740.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2741.1">http://website.com/abcd?param1&amp;param2</span></strong><span class="koboSpan" id="kobo.2742.1"> (regardless of query </span><span class="No-Break"><span class="koboSpan" id="kobo.2743.1">string arguments)</span></span></li>
<li><span class="koboSpan" id="kobo.2744.1">Does </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.2745.1">not apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2746.1">http://website.com/abcd/</span></strong><span class="koboSpan" id="kobo.2747.1"> (trailing slash) due to the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.2748.1">regular expression</span></span></li>
<li><span class="koboSpan" id="kobo.2749.1">Does not apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2750.1">http://website.com/abcde</span></strong><span class="koboSpan" id="kobo.2751.1"> (extra characters) due to the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.2752.1">regular expression</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.2753.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.2754.1">With operating systems such as Microsoft Windows, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2755.1">~</span></strong><span class="koboSpan" id="kobo.2756.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2757.1">~*</span></strong><span class="koboSpan" id="kobo.2758.1"> are both case-insensitive, as the OS uses a </span><span class="No-Break"><span class="koboSpan" id="kobo.2759.1">case-insensitive file</span><a id="_idTextAnchor394"/><span class="koboSpan" id="kobo.2760.1">s</span><a id="_idTextAnchor395"/><span class="koboSpan" id="kobo.2761.1">ystem.</span></span></p>
<h3><span class="koboSpan" id="kobo.2762.1">The ~* modifier</span></h3>
<p><span class="koboSpan" id="kobo.2763.1">The </span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.2764.1">requested URI must be a case-insensitive match for the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.2765.1">regular expression:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2766.1">
server {
    server_name website.com;
    location ~* ^/abcd$ {
    [...]
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2767.1">The regular expression used in the example is similar to the previous one. </span><span class="koboSpan" id="kobo.2767.2">Consequently, the configuration in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2768.1">location</span></strong><span class="koboSpan" id="kobo.2769.1"> block has the </span><span class="No-Break"><span class="koboSpan" id="kobo.2770.1">following attributes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2771.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2772.1">http://website.com/abcd</span></strong><span class="koboSpan" id="kobo.2773.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2774.1">exact match)</span></span></li>
<li><span class="koboSpan" id="kobo.2775.1">Applies to </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2776.1">http://website.com/ABCD</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2777.1"> (case-insensitive)</span></span></li>
<li><span class="koboSpan" id="kobo.2778.1">Applies to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2779.1">http://website.com/abcd?param1&amp;param2</span></strong><span class="koboSpan" id="kobo.2780.1"> (regardless of query </span><span class="No-Break"><span class="koboSpan" id="kobo.2781.1">string arguments)</span></span></li>
<li><span class="koboSpan" id="kobo.2782.1">Does </span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.2783.1">not apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2784.1">http://website.com/abcd/</span></strong><span class="koboSpan" id="kobo.2785.1"> (trailing slash) due to the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.2786.1">regular expression</span></span></li>
<li><span class="koboSpan" id="kobo.2787.1">Does not apply to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2788.1">http://website.com/abcde</span></strong><span class="koboSpan" id="kobo.2789.1"> (extra characters) due to the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.2790.1">regular e</span><a id="_idTextAnchor396"/><span class="koboSpan" id="kobo.2791.1">x</span><a id="_idTextAnchor397"/><span class="koboSpan" id="kobo.2792.1">pression</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.2793.1">The ^~ modifier</span></h3>
<p><span class="koboSpan" id="kobo.2794.1">Similar to </span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.2795.1">the no-symbol behavior, the location URI must begin with the specified pattern. </span><span class="koboSpan" id="kobo.2795.2">The difference is that, if the pattern is matched, NGINX stops searching for other patterns (read the </span><em class="italic"><span class="koboSpan" id="kobo.2796.1">Search order and </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2797.1">priority</span><a id="_idTextAnchor398"/></em></span><span class="No-Break"> <a id="_idTextAnchor399"/><span class="koboSpan" id="kobo.2798.1">section).</span></span></p>
<h3><span class="koboSpan" id="kobo.2799.1">The @ modifier</span></h3>
<p><span class="koboSpan" id="kobo.2800.1">Defines a </span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.2801.1">named </span><strong class="source-inline"><span class="koboSpan" id="kobo.2802.1">location</span></strong><span class="koboSpan" id="kobo.2803.1"> block. </span><span class="koboSpan" id="kobo.2803.2">These blocks cannot be accessed by the client but only by internal requests generated by other directives, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2804.1">try_files</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2805.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2806.1">e</span><a id="_idTextAnchor400"/><a id="_idTextAnchor401"/><span class="koboSpan" id="kobo.2807.1">rror_page</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2808.1">.</span></span></p>
<h2 id="_idParaDest-93"><a id="_idTextAnchor402"/><span class="koboSpan" id="kobo.2809.1">Search order and priority</span></h2>
<p><span class="koboSpan" id="kobo.2810.1">Since it’s</span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.2811.1"> possible to define multiple </span><strong class="source-inline"><span class="koboSpan" id="kobo.2812.1">location</span></strong><span class="koboSpan" id="kobo.2813.1"> blocks with different patterns, you need to understand that when NGINX receives a request, it searches for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2814.1">location</span></strong><span class="koboSpan" id="kobo.2815.1"> block that best matches the </span><span class="No-Break"><span class="koboSpan" id="kobo.2816.1">requested URI:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2817.1">
server {
    server_name website.com;
    location /files/ {
    # applies to any request starting wi"h "/fil"s/"
    # for example /files/doc.txt, /files/, /files/temp/
    }
    location = /files/ {
    # applies to the exact request "o "/fil"s/"
    # and as such does not apply to /files/doc.txt
    # but only /files/
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2818.1">When a client visits </span><strong class="source-inline"><span class="koboSpan" id="kobo.2819.1">http://website.com/files/doc.txt</span></strong><span class="koboSpan" id="kobo.2820.1">, the first </span><strong class="source-inline"><span class="koboSpan" id="kobo.2821.1">location</span></strong><span class="koboSpan" id="kobo.2822.1"> block applies. </span><span class="koboSpan" id="kobo.2822.2">However, when they visit </span><strong class="source-inline"><span class="koboSpan" id="kobo.2823.1">http://website.com/files/</span></strong><span class="koboSpan" id="kobo.2824.1">, the second block applies (even though the first one matches) because it has priority over the first one (it is an </span><span class="No-Break"><span class="koboSpan" id="kobo.2825.1">exact match).</span></span></p>
<p><span class="koboSpan" id="kobo.2826.1">The </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.2827.1">order you established in the configuration file (placing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2828.1">/files/</span></strong><span class="koboSpan" id="kobo.2829.1"> block before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2830.1">= /files/</span></strong><span class="koboSpan" id="kobo.2831.1"> block) is irrelevant. </span><span class="koboSpan" id="kobo.2831.2">NGINX will search for matching patterns in a </span><span class="No-Break"><span class="koboSpan" id="kobo.2832.1">specific order:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2833.1">location</span></strong><span class="koboSpan" id="kobo.2834.1"> blocks with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2835.1">=</span></strong><span class="koboSpan" id="kobo.2836.1"> modifier: If the specified string exactly matches the requested URI, NGINX retains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2837.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2838.1"> block</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2839.1">location</span></strong><span class="koboSpan" id="kobo.2840.1"> blocks with no modifier: If the specified string </span><em class="italic"><span class="koboSpan" id="kobo.2841.1">exactly</span></em><span class="koboSpan" id="kobo.2842.1"> matches the requested URI, NGINX retains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2843.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2844.1"> block</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2845.1">location</span></strong><span class="koboSpan" id="kobo.2846.1"> blocks with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2847.1">^~</span></strong><span class="koboSpan" id="kobo.2848.1"> modifier: If the specified string matches the beginning of the requested URI, NGINX retains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2849.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2850.1"> block</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2851.1">location</span></strong><span class="koboSpan" id="kobo.2852.1"> blocks with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2853.1">~</span></strong><span class="koboSpan" id="kobo.2854.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2855.1">~*</span></strong><span class="koboSpan" id="kobo.2856.1"> modifier: If the regular expression matches the requested URI, NGINX retains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2857.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2858.1"> block</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2859.1">location</span></strong><span class="koboSpan" id="kobo.2860.1"> blocks with no modifier: If the specified string matches the </span><em class="italic"><span class="koboSpan" id="kobo.2861.1">beginning</span></em><span class="koboSpan" id="kobo.2862.1"> of the requested URI, NGINX retains the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2863.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2864.1"> block</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.2865.1">To that extent, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2866.1">^~</span></strong><span class="koboSpan" id="kobo.2867.1"> modifier begins to make sense, and we can envision cases where it becomes useful, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2868.1">three</span><a id="_idTextAnchor403"/> <a id="_idTextAnchor404"/><span class="koboSpan" id="kobo.2869.1">subsections.</span></span></p>
<h3><span class="koboSpan" id="kobo.2870.1">Case 1</span></h3>
<p><span class="koboSpan" id="kobo.2871.1">Here’s an</span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.2872.1"> example of two </span><strong class="source-inline"><span class="koboSpan" id="kobo.2873.1">location</span></strong><span class="koboSpan" id="kobo.2874.1"> blocks both starting </span><span class="No-Break"><span class="koboSpan" id="kobo.2875.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2876.1">/doc</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2877.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2878.1">
server {
    server_name website.com;
    location /doc {
    [...] # requests beginning with "/doc"
    }
    location ~* ^/document$ {
    [...] # requests exactly matching "/document"
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2879.1">You might wonder: When a client requests </span><strong class="source-inline"><span class="koboSpan" id="kobo.2880.1">http://website.com/document</span></strong><span class="koboSpan" id="kobo.2881.1">, which of these two </span><strong class="source-inline"><span class="koboSpan" id="kobo.2882.1">location</span></strong><span class="koboSpan" id="kobo.2883.1"> blocks applies? </span><span class="koboSpan" id="kobo.2883.2">Indeed, both blocks match this request. </span><span class="koboSpan" id="kobo.2883.3">Again, the answer does not lie in the order in which the blocks appear in the configuration files. </span><span class="koboSpan" id="kobo.2883.4">In this case, the second </span><strong class="source-inline"><span class="koboSpan" id="kobo.2884.1">location</span></strong><span class="koboSpan" id="kobo.2885.1"> block will apply as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2886.1">~*</span></strong><span class="koboSpan" id="kobo.2887.1"> modifier has priority o</span><a id="_idTextAnchor405"/><span class="koboSpan" id="kobo.2888.1">v</span><a id="_idTextAnchor406"/><span class="koboSpan" id="kobo.2889.1">er </span><span class="No-Break"><span class="koboSpan" id="kobo.2890.1">the other.</span></span></p>
<h3><span class="koboSpan" id="kobo.2891.1">Case 2</span></h3>
<p><span class="koboSpan" id="kobo.2892.1">Here’s an </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.2893.1">example of two </span><strong class="source-inline"><span class="koboSpan" id="kobo.2894.1">location</span></strong><span class="koboSpan" id="kobo.2895.1"> blocks for a similar URL. </span><span class="koboSpan" id="kobo.2895.2">The first </span><strong class="source-inline"><span class="koboSpan" id="kobo.2896.1">location</span></strong><span class="koboSpan" id="kobo.2897.1"> block starts with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2898.1">/document[+]</span></strong><span class="koboSpan" id="kobo.2899.1">, while the last one is an exact match </span><span class="No-Break"><span class="koboSpan" id="kobo.2900.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2901.1">/document</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2902.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2903.1">
server {
    server_name website.com;
    location /document {
    [...] # requests beginning with "/document"
    }
    location ~* ^/document$ {
    [...] # requests exactly matching "/document"
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2904.1">The question remains the same: What happens when a client sends a request to download </span><strong class="source-inline"><span class="koboSpan" id="kobo.2905.1">http://website.com/document</span></strong><span class="koboSpan" id="kobo.2906.1">? </span><span class="koboSpan" id="kobo.2906.2">There is a trick here. </span><span class="koboSpan" id="kobo.2906.3">The string specified in the first block now exactly matches the requested URI. </span><span class="koboSpan" id="kobo.2906.4">As a result, NGINX prefers it over the </span><span class="No-Break"><span class="koboSpan" id="kobo.2907.1">regu</span><a id="_idTextAnchor407"/><span class="koboSpan" id="kobo.2908.1">l</span><a id="_idTextAnchor408"/><span class="koboSpan" id="kobo.2909.1">ar expression.</span></span></p>
<h3><span class="koboSpan" id="kobo.2910.1">Case 3</span></h3>
<p><span class="koboSpan" id="kobo.2911.1">Here’s an </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.2912.1">example of a corresponding string to the second </span><strong class="source-inline"><span class="koboSpan" id="kobo.2913.1">location</span></strong><span class="koboSpan" id="kobo.2914.1"> block and being processed by the first </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2915.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2916.1"> block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2917.1">
server {
    server_name website.com;
    location ^~ /doc {
    [...] # requests beginning with "/doc"
    }
    location ~* ^/document$ {
    [...] # requests exactly matching "/document"
    }
}</span></pre> <p><span class="koboSpan" id="kobo.2918.1">This last case makes use of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2919.1">^~</span></strong><span class="koboSpan" id="kobo.2920.1"> modifier. </span><span class="koboSpan" id="kobo.2920.2">Which block applies when a client visits </span><strong class="source-inline"><span class="koboSpan" id="kobo.2921.1">http://website.com/document</span></strong><span class="koboSpan" id="kobo.2922.1">? </span><span class="koboSpan" id="kobo.2922.2">The answer is the first block. </span><span class="koboSpan" id="kobo.2922.3">The reason is that </span><strong class="source-inline"><span class="koboSpan" id="kobo.2923.1">^~</span></strong><span class="koboSpan" id="kobo.2924.1"> has priority over </span><strong class="source-inline"><span class="koboSpan" id="kobo.2925.1">~*</span></strong><span class="koboSpan" id="kobo.2926.1">. </span><span class="koboSpan" id="kobo.2926.2">As a result, any request with a URI beginning with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2927.1">/doc</span></strong><span class="koboSpan" id="kobo.2928.1"> will be affected by the first block, even if the request URI matches the regular expression defined in th</span><a id="_idTextAnchor409"/><span class="koboSpan" id="kobo.2929.1">e </span><span class="No-Break"><span class="koboSpan" id="kobo.2930.1">second block.</span></span></p>
<p><span class="koboSpan" id="kobo.2931.1">We’ve now covered the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2932.1">location</span></strong><span class="koboSpan" id="kobo.2933.1"> block, its modifiers, and reusable use cases as we learned to prioritize certain requests according </span><a id="_idTextAnchor410"/><span class="koboSpan" id="kobo.2934.1">to </span><span class="No-Break"><span class="koboSpan" id="kobo.2935.1">their paths.</span></span></p>
<h1 id="_idParaDest-94"><a id="_idTextAnchor411"/><span class="koboSpan" id="kobo.2936.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.2937.1">All through this chapter, we studied key concepts of the NGINX HTTP configuration. </span><span class="koboSpan" id="kobo.2937.2">First, we learned about creating virtual hosts by declaring </span><strong class="source-inline"><span class="koboSpan" id="kobo.2938.1">server</span></strong><span class="koboSpan" id="kobo.2939.1"> blocks. </span><span class="koboSpan" id="kobo.2939.2">Then, we discovered the directives and variables of the HTTP core module that can be inserted within those blocks and eventually understood the mechanisms governing the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2940.1">location</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2941.1"> block.</span></span></p>
<p><span class="koboSpan" id="kobo.2942.1">The job is done. </span><span class="koboSpan" id="kobo.2942.2">Your server now actually serves websites. </span><span class="koboSpan" id="kobo.2942.3">We are going to take it one step further by discovering the modules that truly form the powerhouse of NGINX. </span><span class="koboSpan" id="kobo.2942.4">The next chapter will deal with advanced topics, such as the rewrite and SSI modules, as well as additional components of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2943.1">HTTP server.</span></span></p>
</div>
</body></html>