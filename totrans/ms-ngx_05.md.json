["```\nserver {\n\n   listen             443 default ssl;\n\n   server_name www.example.com;\n\n    ssl_prefer_server_ciphers  on;\n\n    ssl_protocols    TLSv1 SSLv3;\n\n    ssl_ciphers      RC4:HIGH:!aNULL:!MD5:@STRENGTH;\n\n    ssl_session_cache    shared:WEB:10m;\n\n    ssl_certificate        /usr/local/etc/nginx/www.example.com.crt;\n\n    ssl_certificate_key /usr/local/etc/nginx/www.example.com.key;\n\n    location / {\n\n        proxy_set_header X-FORWARDED-PROTO https;\n\n        proxy_pass http://upstream;\n\n    }\n\n}\n```", "```\nserver {\n    …\n\n    proxy_pass https://upstream;\n\n}\n```", "```\nlocation /ssl {\n\n    proxy_set_header ssl_client_cert $ssl_client_cert;\n\n    proxy_pass http://upstream;\n\n}\n```", "```\nserver {\n    …\n\n    ssl_client_certificate /usr/local/etc/nginx/ClientCertCAs.pem;\n\n    ssl_crl /usr/local/etc/nginx/ClientCertCRLs.crl;\n\n    ssl_verify_client on;\n\n    ssl_verify_depth 3;\n\n    error_page 495 = @noverify;\n\n    error_page 496 = @nocert;\n\n    location @noverify {\n\n        proxy_pass http://insecure?status=notverified;\n\n    }\n\n    location @nocert {\n\n        proxy_pass http://insecure?status=nocert;\n\n    }\n\n    location / {\n\n        if ($ssl_client_verify = FAILED) {\n\n            return 495;\n\n        }\n\n        proxy_pass http://secured;\n\n    }\n\n}\n```", "```\nlocation / {\n\n    proxy_set_header X-HTTP-AUTH $ssl_client_s_dn;\n\n    proxy_pass http://secured;\n\n}\n```", "```\ngeoip_country /usr/local/etc/geo/GeoIP.dat;\n```", "```\nhttp {\n\n    # the path to the GeoIP database\n\n    geoip_country /usr/local/etc/geo/GeoIP.dat;\n\n    # we define the variable $exclusions and list all IP addresses # allowed\n    #   access by setting the value to \"1\"\n\n    geo $exclusions {\n\n        default 0;\n        127.0.0.1 1;\n        216.239.32.0/19 1;\n        64.233.160.0/19 1;\n        66.249.80.0/20  1;\n        72.14.192.0/18  1;\n        209.85.128.0/17 1;\n        66.102.0.0/20   1;\n        74.125.0.0/16   1;\n        64.18.0.0/20    1;\n        207.126.144.0/20 1;\n        173.194.0.0/16 1;\n\n    }\n\n    server {\n\n        # the country code we want to allow is \"CH\", for Switzerland\n        if ($geoip_country_code = \"CH\") {\n\n            set $exclusions 1;\n\n        }\n        location / {\n\n            # any IP's not from Switzerland or in our list above # receive the\n            # default value of \"0\" and are given the Forbidden HTTP# code\n            if ($exclusions = \"0\" ) {\n\n                return 403;\n\n            }\n\n            # anybody else has made it this far and is allowed access# to the\n            # upstream server\n            proxy_pass http://upstream;\n\n        }\n\n    }\n\n}\n```", "```\nupstream app {\n\n    server 10.0.40.10;\n\n    server 10.0.40.20;\n\n    server 10.0.40.30;\n\n}\n```", "```\nupstream app {\n\n    server 10.0.40.10;\n\n    server 10.0.40.20;\n    server 10.0.40.30;\n\n    server 10.0.40.40;\n\n    server 10.0.40.50;\n\n    server 10.0.40.60;\n\n}\n```", "```\nupstream app {\n\n    server 10.0.40.10 weight 10;\n\n    server 10.0.40.20 weight 10;\n\n    server 10.0.40.30 weight 10;\n\n    server 10.0.40.100 weight 2;\n\n}\n```", "```\nupstream app {\n\n    server 10.0.40.10;\n\n    server 10.0.40.20;\n\n    server 10.0.40.30 down;\n\n}\n```", "```\nlocation / {\n\n    proxy_connect_timeout 5;\n\n    proxy_read_timeout 10;\n\n    proxy_send_timeout 10;\n\n}\n```", "```\nhttp {\n\n    proxy_buffers 30 32k;\n\n}\n```", "```\nhttp {\n\n    proxy_buffers 4 32k;\n\n    proxy_busy_buffers_size 64k;\n\n}\n```", "```\nhttp {\n\n    # we set this to be on the same filesystem as proxy_cache_path\n    proxy_temp_path /var/spool/nginx;\n\n    # good security practice dictates that this directory is owned by the\n    #  same user as the user directive (under which the workers run)\n    proxy_cache_path /var/spool/nginx keys_zone=CACHE:10m levels=1:2 inactive=6h max_size=1g;\n\n    server {\n\n        location / {\n\n            # using include to bring in a file with commonly-used settings\n            include proxy.conf;\n\n            # referencing the shared memory zone defined above\n            proxy_cache CACHE;\n\n            proxy_cache_valid any 1d;\n\n            proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;\n\n            proxy_pass http://upstream;\n\n        }\n\n    }\n\n}\n```", "```\n/var/spool/nginx/3/f1/614c16873c96c9db2090134be91cbf13\n```", "```\n    proxy_ignore_headers Set-Cookie;\n    ```", "```\n    proxy_cache_key \"$host$request_uri $cookie_user\";\n    ```", "```\nserver {\n\n    proxy_ignore_headers Set-Cookie;\n\n    location /img {\n\n        proxy_cache_key \"$host$request_uri\";\n\n        proxy_pass http://upstream;\n\n    }\n\n    location / {\n\n        proxy_cache_key \"$host$request_uri $cookie_user\";\n\n        proxy_pass http://upstream;\n\n    }\n\n}\n```", "```\nhttp {\n\n    proxy_temp_path /var/www/tmp;\n\n    server {\n\n        root /var/www/data\n\n        location /img {\n\n            error_page 404 = @store;\n\n        }\n\n        location @store {\n\n            internal;\n\n            proxy_store on;\n\n            proxy_store_access group:r all:r;\n\n            proxy_pass http://upstream;\n\n        }\n\n    }\n\n}\n```", "```\nhttp {\n\n    gzip on;\n\n    gzip_http_version 1.0;\n\n    gzip_comp_level 2;\n\n    gzip_types text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript application/json;\n\n    gzip_disable msie6;\n\n}\n```", "```\nhttp {\n\n    gzip on;\n\n    gzip_min_length 1024;\n\n    gzip_buffers 40 4k;\n\n    gzip_comp_level 5;\n\n    gzip_types text/plain application/x-javascript application/json;\n\n}\n```", "```\nhttp {\n\n    gzip_static on;\n\n    gzip_proxied expired no-cache no-store private auth;\n\n}\n```"]