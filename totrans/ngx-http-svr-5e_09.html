<html><head></head><body>
<div id="_idContainer051">
<h1 class="chapter-number" id="_idParaDest-169"><a id="_idTextAnchor701"/><span class="koboSpan" id="kobo.1.1">9</span></h1>
<h1 id="_idParaDest-170"><a id="_idTextAnchor702"/><span class="koboSpan" id="kobo.2.1">Fully Deploy, Manage, and Auto-Update NGINX with Ansible</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, we discussed how NGINX works within a cloud infrastructure and how to use Docker Compose configuration files. </span><span class="koboSpan" id="kobo.3.2">Beyond the cloud, configuration management stands out for its ability to strengthen the resilience of any infrastructure and streamline compliance with </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">security standards.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this chapter, we’ll dive into the practical uses of Ansible, giving you a hands-on tour of its capabilities. </span><span class="koboSpan" id="kobo.5.2">You’ll learn to employ Ansible for efficient configuration management, allowing you to deploy NGINX with precision on any number of servers, from a single machine to an entire fleet, all with a unified </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">configuration approach.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">This chapter covers the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.9.1">Understanding </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">configuration management</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Your first steps with configuration management </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">using Ansible</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Setting up NGINX </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">using Ansible</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Setting up automatic updates </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">using Ansible</span></span></li>
</ul>
<h1 id="_idParaDest-171"><a id="_idTextAnchor703"/><span class="koboSpan" id="kobo.17.1">Understanding configuration management</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.18.1">Configuration management</span></strong><span class="koboSpan" id="kobo.19.1"> is like</span><a id="_idIndexMarker501"/><span class="koboSpan" id="kobo.20.1"> having a master key for your infrastructure’s setup, especially when dealing with multiple deployments. </span><span class="koboSpan" id="kobo.20.2">We’ve seen a glimpse of this with Docker Compose, where all configurations live in Docker, ready to be reused. </span><span class="koboSpan" id="kobo.20.3">This approach isn’t just tidy; it ensures every part of your system walks in step, making it easy to scale or clone configurations when needed. </span><span class="koboSpan" id="kobo.20.4">It’s all about saving time, staying organized, and automating </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">wherever possible.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1">Stepping into configuration management, we turn to </span><strong class="bold"><span class="koboSpan" id="kobo.23.1">Ansible</span></strong><span class="koboSpan" id="kobo.24.1">, a tool celebrated for its simplicity and efficiency. </span><span class="koboSpan" id="kobo.24.2">Unlike other management tools that require installing agents on each server, Ansible operates over SSH, minimizing setup overhead and maintaining a lightweight presence. </span><span class="koboSpan" id="kobo.24.3">It is an agentless orchestration tool that brings simplicity and security to the forefront </span><a id="_idIndexMarker502"/><span class="koboSpan" id="kobo.25.1">of server automation. </span><span class="koboSpan" id="kobo.25.2">While our tutorials will primarily focus on Ubuntu due to its widespread adoption, the principles and practices are transferable to other distributions such as Debian, RHEL, or Fedora, with minor adjustments to adapt to different package managers and </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">system layouts.</span></span></p>
<p><span class="koboSpan" id="kobo.27.1">We now have a better idea of what configuration management is. </span><span class="koboSpan" id="kobo.27.2">In the next section, we will run our first playbook </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">with Ansible.</span></span></p>
<h1 id="_idParaDest-172"><a id="_idTextAnchor704"/><span class="koboSpan" id="kobo.29.1">Running your first Ansible playbook</span></h1>
<p><span class="koboSpan" id="kobo.30.1">Ansible is</span><a id="_idIndexMarker503"/><span class="koboSpan" id="kobo.31.1"> an orchestration tool organized as playbooks. </span><span class="koboSpan" id="kobo.31.2">Each playbook can have multiple roles. </span><span class="koboSpan" id="kobo.31.3">We’ll start with installing Ansible, to run our first playbook for </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">installing NGINX.</span></span></p>
<p><span class="koboSpan" id="kobo.33.1">Ansible orchestrates </span><a id="_idIndexMarker504"/><span class="koboSpan" id="kobo.34.1">tasks through playbooks composed of multiple roles. </span><span class="koboSpan" id="kobo.34.2">Our initial step is installing Ansible to execute our first role: </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.35.1">installing Nginx</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">Let’s begin with the installation of Ansible. </span><span class="koboSpan" id="kobo.37.2">Ansible can be set up on either a remote server or your local Linux system, as long as there is connectivity to your </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">NGINX server:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.39.1">We’ll be using the root account every step of </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">the way:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.41.1">root@ansible:~# apt install ansible</span></strong></pre></li> <li><span class="koboSpan" id="kobo.42.1">Ensure Ansible is installed by checking </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">its version:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.44.1">root@ansible:~# ansible –-version</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.45.1">ansible 2.10.8</span></strong></pre></li> <li><span class="koboSpan" id="kobo.46.1">Now it’s time to create your first Ansible role to install NGINX. </span><span class="koboSpan" id="kobo.46.2">Ansible roles have a standard directory structure. </span><span class="koboSpan" id="kobo.46.3">Use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.47.1">ansible-galaxy</span></strong><span class="koboSpan" id="kobo.48.1"> command to </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">create it:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.50.1">root@ansible:~# ansible-galaxy init nginx_install</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.51.1">- Role nginx_install was created successfully</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.52.1">This will create a directory called </span><strong class="source-inline"><span class="koboSpan" id="kobo.53.1">nginx_install</span></strong><span class="koboSpan" id="kobo.54.1"> with subdirectories for tasks, handlers, templates, </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">and more.</span></span></p></li> <li><span class="koboSpan" id="kobo.56.1">Next, create </span><a id="_idIndexMarker505"/><span class="koboSpan" id="kobo.57.1">the path </span><strong class="source-inline"><span class="koboSpan" id="kobo.58.1">roles/nginx_install/tasks</span></strong><span class="koboSpan" id="kobo.59.1"> with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.60.1">mkdir -p roles/nginx_install/tasks</span></strong><span class="koboSpan" id="kobo.61.1"> command, then create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">roles/nginx_install/tasks/main.yml</span></strong><span class="koboSpan" id="kobo.63.1"> file with the </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">following content:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.65.1">
---
- name: Install nginx
  apt:
    name: nginx
    state: latest
    update_cache: yes</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.66.1">This will define a single task to install NGINX using Ubuntu’s </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">package manager.</span></span></p></li> <li><span class="koboSpan" id="kobo.68.1">Next, we’ll create a playbook to use the role. </span><span class="koboSpan" id="kobo.68.2">At the root of your </span><strong class="source-inline"><span class="koboSpan" id="kobo.69.1">nginx_install</span></strong><span class="koboSpan" id="kobo.70.1"> project, create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.71.1">nginx_install.yml</span></strong><span class="koboSpan" id="kobo.72.1"> file, with the </span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">following content:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.74.1">
---
- hosts: webservers
  become: true
  roles:
    - nginx_install</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.75.1">This will apply the role to all the hosts set (</span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">group: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">webservers</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">).</span></span></p></li> <li><span class="koboSpan" id="kobo.79.1">Our last file needed for the playbook is the inventory. </span><span class="koboSpan" id="kobo.79.2">This is where your machine’s addresses are stored. </span><span class="koboSpan" id="kobo.79.3">Create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">inventory.ini</span></strong><span class="koboSpan" id="kobo.81.1"> file with the </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">following content:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.83.1">
[webservers]
server_ip ansible_ssh_user=root</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.84.1">Please make sure to use an SSH key and replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.85.1">server_ip</span></strong><span class="koboSpan" id="kobo.86.1"> with the IP of your server in order to connect to </span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">the server.</span></span></p></li> <li><span class="koboSpan" id="kobo.88.1">In this inventory, we</span><a id="_idIndexMarker506"/><span class="koboSpan" id="kobo.89.1"> created a group of hosts called </span><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">webservers</span></strong><span class="koboSpan" id="kobo.91.1">. </span><span class="koboSpan" id="kobo.91.2">Within this group, we added one server, </span><strong class="source-inline"><span class="koboSpan" id="kobo.92.1">server_ip</span></strong><span class="koboSpan" id="kobo.93.1">. </span><span class="koboSpan" id="kobo.93.2">For scenarios involving multiple servers, your inventory would expand to list each one under this group, allowing for parallel management across your infrastructure. </span><span class="koboSpan" id="kobo.93.3">Here’s another example of </span><strong class="source-inline"><span class="koboSpan" id="kobo.94.1">inventory.ini</span></strong><span class="koboSpan" id="kobo.95.1"> with </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">multiple servers:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.97.1">
[webservers]
server1.example.com ansible_ssh_user=root
server2.example.com ansible_ssh_user=root
[backend_api]
api1.example.com ansible_ssh_user=root
api2.example.com ansible_ssh_user=root</span></pre></li> <li><span class="koboSpan" id="kobo.98.1">We now have all the files needed to run our first playbook. </span><span class="koboSpan" id="kobo.98.2">Let’s run </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">the playbook:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.100.1">root@ansible:~/nginx_install# ansible-playbook -i inventory.ini nginx_install.yml</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.101.1">PLAY [all]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.102.1">TASK [Gathering Facts]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.103.1">ok: [testvm.lxd]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.104.1">TASK [nginx_install : Install nginx]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.105.1">changed: [testvm.lxd]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.106.1">PLAY RECAP</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.107.1">testvm.lxd: ok=2    changed=1</span></strong></pre></li> </ol>
<p><span class="koboSpan" id="kobo.108.1">Great, our first </span><a id="_idIndexMarker507"/><span class="koboSpan" id="kobo.109.1">Ansible playbook has successfully installed NGINX. </span><span class="koboSpan" id="kobo.109.2">If you run the playbook again, it will recognize that NGINX is already installed and won’t attempt </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">a reinstallation.</span></span></p>
<p><span class="koboSpan" id="kobo.111.1">You can now access your web server on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">80</span></strong><span class="koboSpan" id="kobo.113.1"> to check whether NGINX </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">is available:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer050">
<span class="koboSpan" id="kobo.115.1"><img alt="Figure 9.1: Default Nginx configuration installed by Ansible" src="image/B21787_09_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.116.1">Figure 9.1: Default Nginx configuration installed by Ansible</span></p>
<p><span class="koboSpan" id="kobo.117.1">We’ve installed Ansible, and installed NGINX on a remote server using Ansible. </span><span class="koboSpan" id="kobo.117.2">In the next section, we’ll learn how to handle configuration files </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">using Ansible.</span></span></p>
<h1 id="_idParaDest-173"><a id="_idTextAnchor705"/><span class="koboSpan" id="kobo.119.1">Setting up NGINX using Ansible</span></h1>
<p><span class="koboSpan" id="kobo.120.1">In the last section, we</span><a id="_idIndexMarker508"/><span class="koboSpan" id="kobo.121.1"> made a project called </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">nginx_install</span></strong><span class="koboSpan" id="kobo.123.1">. </span><span class="koboSpan" id="kobo.123.2">We’ll </span><a id="_idIndexMarker509"/><span class="koboSpan" id="kobo.124.1">continue with this project in order to have Ansible write the </span><strong class="source-inline"><span class="koboSpan" id="kobo.125.1">nginx.conf</span></strong><span class="koboSpan" id="kobo.126.1"> file for us. </span><span class="koboSpan" id="kobo.126.2">So let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">get started:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.128.1">First, create a directory at </span><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">roles/nginx_install/files</span></strong><span class="koboSpan" id="kobo.130.1"> with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">mkdir -p roles/nginx_install/files</span></strong><span class="koboSpan" id="kobo.132.1"> command, then add your </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">nginx.conf</span></strong><span class="koboSpan" id="kobo.134.1"> file to </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">this folder.</span></span></li>
<li><span class="koboSpan" id="kobo.136.1">Then, make a new task to copy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.137.1">nginx.conf</span></strong><span class="koboSpan" id="kobo.138.1"> file. </span><span class="koboSpan" id="kobo.138.2">Edit the existing </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">roles/nginx_install/tasks/main.yml</span></strong><span class="koboSpan" id="kobo.140.1"> file and add </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.142.1">
- name: Copy nginx configuration file
  copy:
    src: nginx.conf
    dest: /etc/nginx/nginx.conf
    owner: root
    group: root
    mode: '0644'
  notify: restart nginx</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.143.1">This will </span><a id="_idIndexMarker510"/><span class="koboSpan" id="kobo.144.1">send the </span><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">nginx.conf</span></strong><span class="koboSpan" id="kobo.146.1"> file from your </span><strong class="source-inline"><span class="koboSpan" id="kobo.147.1">files</span></strong><span class="koboSpan" id="kobo.148.1"> directory to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.149.1">/etc/nginx/</span></strong><span class="koboSpan" id="kobo.150.1"> directory on your </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">remote server.</span></span></p></li> <li><span class="koboSpan" id="kobo.152.1">Next, we’ll </span><a id="_idIndexMarker511"/><span class="koboSpan" id="kobo.153.1">define a handler within Ansible. </span><span class="koboSpan" id="kobo.153.2">Handlers are tasks that only run when notified by another task. </span><span class="koboSpan" id="kobo.153.3">In our case, we’ll set up a handler to restart NGINX, but it will only trigger if there’s been a change to the </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">configuration file.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.155.1">Let’s create our handler by creating the </span><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">roles/nginx_install/handlers</span></strong><span class="koboSpan" id="kobo.157.1"> directory with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">mkdir -p roles/nginx_install/handlers</span></strong><span class="koboSpan" id="kobo.159.1"> command. </span><span class="koboSpan" id="kobo.159.2">Then, let’s create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">roles/nginx_install/handlers/main.yml</span></strong><span class="koboSpan" id="kobo.161.1"> file with the </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">following content:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.163.1">
- name: restart nginx
  service:
    name: nginx
    state: restarted</span></pre></li> <li><span class="koboSpan" id="kobo.164.1">Let’s run the </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">playbook again:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.166.1">root@ansible:~/nginx_install# ansible-playbook -i inventory.ini nginx_install.yml</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.167.1">PLAY [all]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.168.1">TASK [Gathering Facts]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.169.1">ok: [testvm.lxd]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.170.1">TASK [nginx_install : Install nginx]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.171.1">ok: [testvm.lxd]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.172.1">TASK [nginx_install : Copy nginx configuration file]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.173.1">changed: [testvm.lxd]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.174.1">RUNNING HANDLER [nginx_install : restart nginx]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.175.1">changed: [testvm.lxd]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.176.1">PLAY RECAP</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.177.1">testvm.lxd: ok=4    changed=2</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.178.1">The output shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">Install nginx</span></strong><span class="koboSpan" id="kobo.180.1"> task as </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">OK</span></strong><span class="koboSpan" id="kobo.182.1"> since NGINX is already in place from </span><a id="_idIndexMarker512"/><span class="koboSpan" id="kobo.183.1">a previous run. </span><span class="koboSpan" id="kobo.183.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.184.1">copy nginx configuration file</span></strong><span class="koboSpan" id="kobo.185.1"> task was successful, prompting</span><a id="_idIndexMarker513"/><span class="koboSpan" id="kobo.186.1"> the handler to restart NGINX. </span><span class="koboSpan" id="kobo.186.2">If you rerun the playbook, it won’t repeat these actions as it recognizes NGINX’s installation and the </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">existing configuration.</span></span></p></li> </ol>
<p><span class="koboSpan" id="kobo.188.1">NGINX has been installed with Ansible. </span><span class="koboSpan" id="kobo.188.2">In the next section, we will learn about automatic updates and how to secure your server environment directly with Ansible </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">configuration files.</span></span></p>
<h1 id="_idParaDest-174"><a id="_idTextAnchor706"/><span class="koboSpan" id="kobo.190.1">Setting up automatic updates using Ansible</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.191.1">unattended-upgrades</span></strong><span class="koboSpan" id="kobo.192.1"> is a valuable </span><a id="_idIndexMarker514"/><span class="koboSpan" id="kobo.193.1">tool that ensures your system automatically</span><a id="_idIndexMarker515"/><span class="koboSpan" id="kobo.194.1"> receives updates in response to security vulnerabilities, such as CVE exploits. </span><span class="koboSpan" id="kobo.194.2">It’s particularly useful for critical applications such as NGINX, where staying ahead of potential threats is crucial. </span><span class="koboSpan" id="kobo.194.3">When a security update is issued for NGINX, </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">unattended-upgrades</span></strong><span class="koboSpan" id="kobo.196.1"> takes care of the update process, providing peace of mind that your server remains secure without </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">manual intervention.</span></span></p>
<p><span class="koboSpan" id="kobo.198.1">To</span><a id="_idIndexMarker516"/><span class="koboSpan" id="kobo.199.1"> install the </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">unattended-upgrades</span></strong><span class="koboSpan" id="kobo.201.1"> package, you can edit the existing file </span><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">roles/nginx_install/tasks/main.yml</span></strong><span class="koboSpan" id="kobo.203.1"> and </span><a id="_idIndexMarker517"/><span class="koboSpan" id="kobo.204.1">add </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.206.1">
- name: Install unattended-upgrades
  apt:
    name: unattended-upgrades
    state: present</span></pre> <p><span class="koboSpan" id="kobo.207.1">Rerun the playbook to install </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">the package:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.209.1">
root@ansible:~/nginx_install# ansible-playbook -i inventory.ini nginx_install.yml
[…]
TASK [nginx_install : Install unattended-upgrades]
ok: [testvm.lxd]</span></pre> <p><span class="koboSpan" id="kobo.210.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">unattended-upgrades</span></strong><span class="koboSpan" id="kobo.212.1"> installed, your system is configured for automatic security updates. </span><span class="koboSpan" id="kobo.212.2">For those seeking comprehensive updates beyond security, the package’s documentation provides guidance for fine-tuning </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">your settings.</span></span></p>
<h1 id="_idParaDest-175"><a id="_idTextAnchor707"/><span class="koboSpan" id="kobo.214.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.215.1">In this chapter, we explored the power of configuration management with Ansible, learning to orchestrate our NGINX setup seamlessly. </span><span class="koboSpan" id="kobo.215.2">Through Ansible’s capabilities, we’ve initiated package installations, updated configurations, and embraced the efficiency of automated updates. </span><span class="koboSpan" id="kobo.215.3">The scalability of these processes has opened new doors for system administration. </span><span class="koboSpan" id="kobo.215.4">While we’ve only scratched the surface, further exploration into Ansible can unlock automated deployments of dynamic configurations, TLS certificates, comprehensive firewall setups, and much more. </span><span class="koboSpan" id="kobo.215.5">For those interested in deepening their understanding of Ansible, a variety of playbooks can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">at </span></span><a href="http://docs.ansible.com"><span class="No-Break"><span class="koboSpan" id="kobo.217.1">docs.ansible.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.218.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.219.1">In the next chapter, we’ll explore the practical applications and real-world scenarios for </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">implementing NGINX.</span></span></p>
</div>
</body></html>